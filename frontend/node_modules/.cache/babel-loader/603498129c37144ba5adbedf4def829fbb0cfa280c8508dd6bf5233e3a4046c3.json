{"ast":null,"code":"import { __decorate } from \"../../tslib.es6.js\";\nimport { serialize } from \"../../Misc/decorators.js\";\nimport { CameraInputTypes } from \"../../Cameras/cameraInputsManager.js\";\nimport { PointerEventTypes } from \"../../Events/pointerEvents.js\";\nimport { Tools } from \"../../Misc/tools.js\";\nimport { Logger } from \"../../Misc/logger.js\";\n/**\n * Manage the mouse wheel inputs to control a follow camera.\n * @see https://doc.babylonjs.com/features/featuresDeepDive/cameras/customizingCameraInputs\n */\nexport class FollowCameraMouseWheelInput {\n  constructor() {\n    /**\n     * Moue wheel controls zoom. (Mouse wheel modifies camera.radius value.)\n     */\n    this.axisControlRadius = true;\n    /**\n     * Moue wheel controls height. (Mouse wheel modifies camera.heightOffset value.)\n     */\n    this.axisControlHeight = false;\n    /**\n     * Moue wheel controls angle. (Mouse wheel modifies camera.rotationOffset value.)\n     */\n    this.axisControlRotation = false;\n    /**\n     * Gets or Set the mouse wheel precision or how fast is the camera moves in\n     * relation to mouseWheel events.\n     */\n    this.wheelPrecision = 3.0;\n    /**\n     * wheelDeltaPercentage will be used instead of wheelPrecision if different from 0.\n     * It defines the percentage of current camera.radius to use as delta when wheel is used.\n     */\n    this.wheelDeltaPercentage = 0;\n  }\n  /**\n   * Attach the input controls to a specific dom element to get the input from.\n   * @param noPreventDefault Defines whether event caught by the controls should call preventdefault() (https://developer.mozilla.org/en-US/docs/Web/API/Event/preventDefault)\n   */\n  attachControl(noPreventDefault) {\n    noPreventDefault = Tools.BackCompatCameraNoPreventDefault(arguments);\n    this._wheel = p => {\n      // sanity check - this should be a PointerWheel event.\n      if (p.type !== PointerEventTypes.POINTERWHEEL) {\n        return;\n      }\n      const event = p.event;\n      let delta = 0;\n      const wheelDelta = Math.max(-1, Math.min(1, event.deltaY));\n      if (this.wheelDeltaPercentage) {\n        if (+this.axisControlRadius + +this.axisControlHeight + +this.axisControlRotation) {\n          Logger.Warn(\"wheelDeltaPercentage only usable when mouse wheel \" + \"controls ONE axis. \" + \"Currently enabled: \" + \"axisControlRadius: \" + this.axisControlRadius + \", axisControlHeightOffset: \" + this.axisControlHeight + \", axisControlRotationOffset: \" + this.axisControlRotation);\n        }\n        if (this.axisControlRadius) {\n          delta = wheelDelta * 0.01 * this.wheelDeltaPercentage * this.camera.radius;\n        } else if (this.axisControlHeight) {\n          delta = wheelDelta * 0.01 * this.wheelDeltaPercentage * this.camera.heightOffset;\n        } else if (this.axisControlRotation) {\n          delta = wheelDelta * 0.01 * this.wheelDeltaPercentage * this.camera.rotationOffset;\n        }\n      } else {\n        delta = wheelDelta * this.wheelPrecision;\n      }\n      if (delta) {\n        if (this.axisControlRadius) {\n          this.camera.radius += delta;\n        } else if (this.axisControlHeight) {\n          this.camera.heightOffset -= delta;\n        } else if (this.axisControlRotation) {\n          this.camera.rotationOffset -= delta;\n        }\n      }\n      if (event.preventDefault) {\n        if (!noPreventDefault) {\n          event.preventDefault();\n        }\n      }\n    };\n    this._observer = this.camera.getScene()._inputManager._addCameraPointerObserver(this._wheel, PointerEventTypes.POINTERWHEEL);\n  }\n  /**\n   * Detach the current controls from the specified dom element.\n   */\n  detachControl() {\n    if (this._observer) {\n      this.camera.getScene()._inputManager._removeCameraPointerObserver(this._observer);\n      this._observer = null;\n      this._wheel = null;\n    }\n  }\n  /**\n   * Gets the class name of the current input.\n   * @returns the class name\n   */\n  getClassName() {\n    return \"ArcRotateCameraMouseWheelInput\";\n  }\n  /**\n   * Get the friendly name associated with the input class.\n   * @returns the input friendly name\n   */\n  getSimpleName() {\n    return \"mousewheel\";\n  }\n}\n__decorate([serialize()], FollowCameraMouseWheelInput.prototype, \"axisControlRadius\", void 0);\n__decorate([serialize()], FollowCameraMouseWheelInput.prototype, \"axisControlHeight\", void 0);\n__decorate([serialize()], FollowCameraMouseWheelInput.prototype, \"axisControlRotation\", void 0);\n__decorate([serialize()], FollowCameraMouseWheelInput.prototype, \"wheelPrecision\", void 0);\n__decorate([serialize()], FollowCameraMouseWheelInput.prototype, \"wheelDeltaPercentage\", void 0);\nCameraInputTypes[\"FollowCameraMouseWheelInput\"] = FollowCameraMouseWheelInput;\n//# sourceMappingURL=followCameraMouseWheelInput.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}