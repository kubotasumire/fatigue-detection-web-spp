{"ast":null,"code":"import { ThinEngine } from \"../../Engines/thinEngine.js\";\nThinEngine.prototype.setAlphaConstants = function (r, g, b, a) {\n  this._alphaState.setAlphaBlendConstants(r, g, b, a);\n};\nThinEngine.prototype.setAlphaMode = function (mode, noDepthWriteChange = false) {\n  if (this._alphaMode === mode) {\n    if (!noDepthWriteChange) {\n      // Make sure we still have the correct depth mask according to the alpha mode (a transparent material could have forced writting to the depth buffer, for instance)\n      const depthMask = mode === 0;\n      if (this.depthCullingState.depthMask !== depthMask) {\n        this.depthCullingState.depthMask = depthMask;\n      }\n    }\n    return;\n  }\n  switch (mode) {\n    case 0:\n      this._alphaState.alphaBlend = false;\n      break;\n    case 7:\n      this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE, this._gl.ONE_MINUS_SRC_ALPHA, this._gl.ONE, this._gl.ONE);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 8:\n      this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE, this._gl.ONE_MINUS_SRC_ALPHA, this._gl.ONE, this._gl.ONE_MINUS_SRC_ALPHA);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 2:\n      this._alphaState.setAlphaBlendFunctionParameters(this._gl.SRC_ALPHA, this._gl.ONE_MINUS_SRC_ALPHA, this._gl.ONE, this._gl.ONE);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 6:\n      this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE, this._gl.ONE, this._gl.ZERO, this._gl.ONE);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 1:\n      this._alphaState.setAlphaBlendFunctionParameters(this._gl.SRC_ALPHA, this._gl.ONE, this._gl.ZERO, this._gl.ONE);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 3:\n      this._alphaState.setAlphaBlendFunctionParameters(this._gl.ZERO, this._gl.ONE_MINUS_SRC_COLOR, this._gl.ONE, this._gl.ONE);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 4:\n      this._alphaState.setAlphaBlendFunctionParameters(this._gl.DST_COLOR, this._gl.ZERO, this._gl.ONE, this._gl.ONE);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 5:\n      this._alphaState.setAlphaBlendFunctionParameters(this._gl.SRC_ALPHA, this._gl.ONE_MINUS_SRC_COLOR, this._gl.ONE, this._gl.ONE);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 9:\n      this._alphaState.setAlphaBlendFunctionParameters(this._gl.CONSTANT_COLOR, this._gl.ONE_MINUS_CONSTANT_COLOR, this._gl.CONSTANT_ALPHA, this._gl.ONE_MINUS_CONSTANT_ALPHA);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 10:\n      this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE, this._gl.ONE_MINUS_SRC_COLOR, this._gl.ONE, this._gl.ONE_MINUS_SRC_ALPHA);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 11:\n      this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE, this._gl.ONE, this._gl.ONE, this._gl.ONE);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 12:\n      this._alphaState.setAlphaBlendFunctionParameters(this._gl.DST_ALPHA, this._gl.ONE, this._gl.ZERO, this._gl.ZERO);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 13:\n      this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE_MINUS_DST_COLOR, this._gl.ONE_MINUS_SRC_COLOR, this._gl.ONE_MINUS_DST_ALPHA, this._gl.ONE_MINUS_SRC_ALPHA);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 14:\n      this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE, this._gl.ONE_MINUS_SRC_ALPHA, this._gl.ONE, this._gl.ONE_MINUS_SRC_ALPHA);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 15:\n      this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE, this._gl.ONE, this._gl.ONE, this._gl.ZERO);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 16:\n      this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE_MINUS_DST_COLOR, this._gl.ONE_MINUS_SRC_COLOR, this._gl.ZERO, this._gl.ONE);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 17:\n      // Same as ALPHA_COMBINE but accumulates (1 - alpha) values in the alpha channel for a later readout in order independant transparency\n      this._alphaState.setAlphaBlendFunctionParameters(this._gl.SRC_ALPHA, this._gl.ONE_MINUS_SRC_ALPHA, this._gl.ONE, this._gl.ONE_MINUS_SRC_ALPHA);\n      this._alphaState.alphaBlend = true;\n      break;\n  }\n  if (!noDepthWriteChange) {\n    this.depthCullingState.depthMask = mode === 0;\n  }\n  this._alphaMode = mode;\n};\nThinEngine.prototype.getAlphaMode = function () {\n  return this._alphaMode;\n};\nThinEngine.prototype.setAlphaEquation = function (equation) {\n  if (this._alphaEquation === equation) {\n    return;\n  }\n  switch (equation) {\n    case 0:\n      this._alphaState.setAlphaEquationParameters(32774, 32774);\n      break;\n    case 1:\n      this._alphaState.setAlphaEquationParameters(32778, 32778);\n      break;\n    case 2:\n      this._alphaState.setAlphaEquationParameters(32779, 32779);\n      break;\n    case 3:\n      this._alphaState.setAlphaEquationParameters(32776, 32776);\n      break;\n    case 4:\n      this._alphaState.setAlphaEquationParameters(32775, 32775);\n      break;\n    case 5:\n      this._alphaState.setAlphaEquationParameters(32775, 32774);\n      break;\n  }\n  this._alphaEquation = equation;\n};\nThinEngine.prototype.getAlphaEquation = function () {\n  return this._alphaEquation;\n};\n//# sourceMappingURL=engine.alpha.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}