{"ast":null,"code":"import { __decorate } from \"../tslib.es6.js\";\nimport { PostProcess } from \"./postProcess.js\";\nimport { ToGammaSpace } from \"../Maths/math.constants.js\";\nimport \"../Shaders/extractHighlights.fragment.js\";\nimport { serialize } from \"../Misc/decorators.js\";\nimport { RegisterClass } from \"../Misc/typeStore.js\";\n/**\n * The extract highlights post process sets all pixels to black except pixels above the specified luminance threshold. Used as the first step for a bloom effect.\n */\nexport class ExtractHighlightsPostProcess extends PostProcess {\n  /**\n   * Gets a string identifying the name of the class\n   * @returns \"ExtractHighlightsPostProcess\" string\n   */\n  getClassName() {\n    return \"ExtractHighlightsPostProcess\";\n  }\n  constructor(name, options, camera, samplingMode, engine, reusable, textureType = 0, blockCompilation = false) {\n    super(name, \"extractHighlights\", [\"threshold\", \"exposure\"], null, options, camera, samplingMode, engine, reusable, null, textureType, undefined, null, blockCompilation);\n    /**\n     * The luminance threshold, pixels below this value will be set to black.\n     */\n    this.threshold = 0.9;\n    /** @internal */\n    this._exposure = 1;\n    /**\n     * Post process which has the input texture to be used when performing highlight extraction\n     * @internal\n     */\n    this._inputPostProcess = null;\n    this.onApplyObservable.add(effect => {\n      this.externalTextureSamplerBinding = !!this._inputPostProcess;\n      if (this._inputPostProcess) {\n        effect.setTextureFromPostProcess(\"textureSampler\", this._inputPostProcess);\n      }\n      effect.setFloat(\"threshold\", Math.pow(this.threshold, ToGammaSpace));\n      effect.setFloat(\"exposure\", this._exposure);\n    });\n  }\n}\n__decorate([serialize()], ExtractHighlightsPostProcess.prototype, \"threshold\", void 0);\nRegisterClass(\"BABYLON.ExtractHighlightsPostProcess\", ExtractHighlightsPostProcess);\n//# sourceMappingURL=extractHighlightsPostProcess.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}