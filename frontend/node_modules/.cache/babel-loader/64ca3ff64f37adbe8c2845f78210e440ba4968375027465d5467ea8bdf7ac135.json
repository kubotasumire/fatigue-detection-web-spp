{"ast":null,"code":"import { PerfCounter } from \"../Misc/perfCounter.js\";\n/**\n * This class can be used to get instrumentation data from a Babylon engine\n * @see https://doc.babylonjs.com/features/featuresDeepDive/scene/optimize_your_scene#engineinstrumentation\n */\nexport class EngineInstrumentation {\n  // Properties\n  /**\n   * Gets the perf counter used for GPU frame time\n   */\n  get gpuFrameTimeCounter() {\n    return this.engine.getGPUFrameTimeCounter();\n  }\n  /**\n   * Gets the GPU frame time capture status\n   */\n  get captureGPUFrameTime() {\n    return this._captureGPUFrameTime;\n  }\n  /**\n   * Enable or disable the GPU frame time capture\n   */\n  set captureGPUFrameTime(value) {\n    if (value === this._captureGPUFrameTime) {\n      return;\n    }\n    this._captureGPUFrameTime = value;\n    this.engine.captureGPUFrameTime(value);\n  }\n  /**\n   * Gets the perf counter used for shader compilation time\n   */\n  get shaderCompilationTimeCounter() {\n    return this._shaderCompilationTime;\n  }\n  /**\n   * Gets the shader compilation time capture status\n   */\n  get captureShaderCompilationTime() {\n    return this._captureShaderCompilationTime;\n  }\n  /**\n   * Enable or disable the shader compilation time capture\n   */\n  set captureShaderCompilationTime(value) {\n    if (value === this._captureShaderCompilationTime) {\n      return;\n    }\n    this._captureShaderCompilationTime = value;\n    if (value) {\n      this._onBeforeShaderCompilationObserver = this.engine.onBeforeShaderCompilationObservable.add(() => {\n        this._shaderCompilationTime.fetchNewFrame();\n        this._shaderCompilationTime.beginMonitoring();\n      });\n      this._onAfterShaderCompilationObserver = this.engine.onAfterShaderCompilationObservable.add(() => {\n        this._shaderCompilationTime.endMonitoring();\n      });\n    } else {\n      this.engine.onBeforeShaderCompilationObservable.remove(this._onBeforeShaderCompilationObserver);\n      this._onBeforeShaderCompilationObserver = null;\n      this.engine.onAfterShaderCompilationObservable.remove(this._onAfterShaderCompilationObserver);\n      this._onAfterShaderCompilationObserver = null;\n    }\n  }\n  /**\n   * Instantiates a new engine instrumentation.\n   * This class can be used to get instrumentation data from a Babylon engine\n   * @see https://doc.babylonjs.com/features/featuresDeepDive/scene/optimize_your_scene#engineinstrumentation\n   * @param engine Defines the engine to instrument\n   */\n  constructor(\n  /**\n   * Define the instrumented engine.\n   */\n  engine) {\n    this.engine = engine;\n    this._captureGPUFrameTime = false;\n    this._captureShaderCompilationTime = false;\n    this._shaderCompilationTime = new PerfCounter();\n    // Observers\n    this._onBeginFrameObserver = null;\n    this._onEndFrameObserver = null;\n    this._onBeforeShaderCompilationObserver = null;\n    this._onAfterShaderCompilationObserver = null;\n  }\n  /**\n   * Dispose and release associated resources.\n   */\n  dispose() {\n    this.engine.onBeginFrameObservable.remove(this._onBeginFrameObserver);\n    this._onBeginFrameObserver = null;\n    this.engine.onEndFrameObservable.remove(this._onEndFrameObserver);\n    this._onEndFrameObserver = null;\n    this.engine.onBeforeShaderCompilationObservable.remove(this._onBeforeShaderCompilationObserver);\n    this._onBeforeShaderCompilationObserver = null;\n    this.engine.onAfterShaderCompilationObservable.remove(this._onAfterShaderCompilationObserver);\n    this._onAfterShaderCompilationObserver = null;\n    this.engine = null;\n  }\n}\n//# sourceMappingURL=engineInstrumentation.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}