{"ast":null,"code":"import { Engine } from \"../../engine.js\";\nimport { WebGPUEngine } from \"../../webgpuEngine.js\";\nWebGPUEngine.prototype.setAlphaMode = function (mode, noDepthWriteChange = false) {\n  if (this._alphaMode === mode && (mode === 0 && !this._alphaState.alphaBlend || mode !== 0 && this._alphaState.alphaBlend)) {\n    if (!noDepthWriteChange) {\n      // Make sure we still have the correct depth mask according to the alpha mode (a transparent material could have forced writting to the depth buffer, for instance)\n      const depthMask = mode === 0;\n      if (this.depthCullingState.depthMask !== depthMask) {\n        this.setDepthWrite(depthMask);\n        this._cacheRenderPipeline.setDepthWriteEnabled(depthMask);\n      }\n    }\n    return;\n  }\n  switch (mode) {\n    case 0:\n      this._alphaState.alphaBlend = false;\n      break;\n    case 7:\n      this._alphaState.setAlphaBlendFunctionParameters(1, 771, 1, 1);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 8:\n      this._alphaState.setAlphaBlendFunctionParameters(1, 771, 1, 771);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 2:\n      this._alphaState.setAlphaBlendFunctionParameters(770, 771, 1, 1);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 6:\n      this._alphaState.setAlphaBlendFunctionParameters(1, 1, 0, 1);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 1:\n      this._alphaState.setAlphaBlendFunctionParameters(770, 1, 0, 1);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 3:\n      this._alphaState.setAlphaBlendFunctionParameters(0, 769, 1, 1);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 4:\n      this._alphaState.setAlphaBlendFunctionParameters(774, 0, 1, 1);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 5:\n      this._alphaState.setAlphaBlendFunctionParameters(770, 769, 1, 1);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 9:\n      this._alphaState.setAlphaBlendFunctionParameters(32769, 32770, 32771, 32772);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 10:\n      this._alphaState.setAlphaBlendFunctionParameters(1, 769, 1, 771);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 11:\n      this._alphaState.setAlphaBlendFunctionParameters(1, 1, 1, 1);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 12:\n      this._alphaState.setAlphaBlendFunctionParameters(772, 1, 0, 0);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 13:\n      this._alphaState.setAlphaBlendFunctionParameters(775, 769, 773, 771);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 14:\n      this._alphaState.setAlphaBlendFunctionParameters(1, 771, 1, 771);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 15:\n      this._alphaState.setAlphaBlendFunctionParameters(1, 1, 1, 0);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 16:\n      this._alphaState.setAlphaBlendFunctionParameters(775, 769, 0, 1);\n      this._alphaState.alphaBlend = true;\n      break;\n    case 17:\n      // Same as ALPHA_COMBINE but accumulates (1 - alpha) values in the alpha channel for a later readout in order independant transparency\n      this._alphaState.setAlphaBlendFunctionParameters(770, 771, 1, 771);\n      this._alphaState.alphaBlend = true;\n      break;\n  }\n  if (!noDepthWriteChange) {\n    this.setDepthWrite(mode === Engine.ALPHA_DISABLE);\n    this._cacheRenderPipeline.setDepthWriteEnabled(mode === Engine.ALPHA_DISABLE);\n  }\n  this._alphaMode = mode;\n  this._cacheRenderPipeline.setAlphaBlendEnabled(this._alphaState.alphaBlend);\n  this._cacheRenderPipeline.setAlphaBlendFactors(this._alphaState._blendFunctionParameters, this._alphaState._blendEquationParameters);\n};\nWebGPUEngine.prototype.setAlphaEquation = function (equation) {\n  Engine.prototype.setAlphaEquation.call(this, equation);\n  this._cacheRenderPipeline.setAlphaBlendFactors(this._alphaState._blendFunctionParameters, this._alphaState._blendEquationParameters);\n};\n//# sourceMappingURL=engine.alpha.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}