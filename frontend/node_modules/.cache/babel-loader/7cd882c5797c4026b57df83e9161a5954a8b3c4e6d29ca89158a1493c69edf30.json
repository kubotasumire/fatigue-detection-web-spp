{"ast":null,"code":"import { VirtualJoystick, JoystickAxis } from \"../../Misc/virtualJoystick.js\";\nimport { CameraInputTypes } from \"../../Cameras/cameraInputsManager.js\";\nimport { Matrix, Vector3 } from \"../../Maths/math.vector.js\";\nimport { FreeCameraInputsManager } from \"../../Cameras/freeCameraInputsManager.js\";\n/**\n * Add virtual joystick input support to the input manager.\n * @returns the current input manager\n */\nFreeCameraInputsManager.prototype.addVirtualJoystick = function () {\n  this.add(new FreeCameraVirtualJoystickInput());\n  return this;\n};\n/**\n * Manage the Virtual Joystick inputs to control the movement of a free camera.\n * @see https://doc.babylonjs.com/features/featuresDeepDive/cameras/customizingCameraInputs\n */\nexport class FreeCameraVirtualJoystickInput {\n  /**\n   * Gets the left stick of the virtual joystick.\n   * @returns The virtual Joystick\n   */\n  getLeftJoystick() {\n    return this._leftjoystick;\n  }\n  /**\n   * Gets the right stick of the virtual joystick.\n   * @returns The virtual Joystick\n   */\n  getRightJoystick() {\n    return this._rightjoystick;\n  }\n  /**\n   * Update the current camera state depending on the inputs that have been used this frame.\n   * This is a dynamically created lambda to avoid the performance penalty of looping for inputs in the render loop.\n   */\n  checkInputs() {\n    if (this._leftjoystick) {\n      const camera = this.camera;\n      const speed = camera._computeLocalCameraSpeed() * 50;\n      const cameraTransform = Matrix.RotationYawPitchRoll(camera.rotation.y, camera.rotation.x, 0);\n      const deltaTransform = Vector3.TransformCoordinates(new Vector3(this._leftjoystick.deltaPosition.x * speed, this._leftjoystick.deltaPosition.y * speed, this._leftjoystick.deltaPosition.z * speed), cameraTransform);\n      camera.cameraDirection = camera.cameraDirection.add(deltaTransform);\n      camera.cameraRotation = camera.cameraRotation.addVector3(this._rightjoystick.deltaPosition);\n      if (!this._leftjoystick.pressed) {\n        this._leftjoystick.deltaPosition = this._leftjoystick.deltaPosition.scale(0.9);\n      }\n      if (!this._rightjoystick.pressed) {\n        this._rightjoystick.deltaPosition = this._rightjoystick.deltaPosition.scale(0.9);\n      }\n    }\n  }\n  /**\n   * Attach the input controls to a specific dom element to get the input from.\n   */\n  attachControl() {\n    this._leftjoystick = new VirtualJoystick(true);\n    this._leftjoystick.setAxisForUpDown(JoystickAxis.Z);\n    this._leftjoystick.setAxisForLeftRight(JoystickAxis.X);\n    this._leftjoystick.setJoystickSensibility(0.15);\n    this._rightjoystick = new VirtualJoystick(false);\n    this._rightjoystick.setAxisForUpDown(JoystickAxis.X);\n    this._rightjoystick.setAxisForLeftRight(JoystickAxis.Y);\n    this._rightjoystick.reverseUpDown = true;\n    this._rightjoystick.setJoystickSensibility(0.05);\n    this._rightjoystick.setJoystickColor(\"yellow\");\n  }\n  /**\n   * Detach the current controls from the specified dom element.\n   */\n  detachControl() {\n    this._leftjoystick.releaseCanvas();\n    this._rightjoystick.releaseCanvas();\n  }\n  /**\n   * Gets the class name of the current input.\n   * @returns the class name\n   */\n  getClassName() {\n    return \"FreeCameraVirtualJoystickInput\";\n  }\n  /**\n   * Get the friendly name associated with the input class.\n   * @returns the input friendly name\n   */\n  getSimpleName() {\n    return \"virtualJoystick\";\n  }\n}\nCameraInputTypes[\"FreeCameraVirtualJoystickInput\"] = FreeCameraVirtualJoystickInput;\n//# sourceMappingURL=freeCameraVirtualJoystickInput.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}