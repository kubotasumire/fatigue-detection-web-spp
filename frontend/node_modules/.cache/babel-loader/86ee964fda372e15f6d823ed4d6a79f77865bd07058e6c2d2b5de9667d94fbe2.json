{"ast":null,"code":"import { Tools } from \"../Misc/tools.js\";\nimport { Observable } from \"../Misc/observable.js\";\nimport { Scene } from \"../scene.js\";\nimport { Engine } from \"../Engines/engine.js\";\nimport { EngineStore } from \"../Engines/engineStore.js\";\nObject.defineProperty(Scene.prototype, \"debugLayer\", {\n  get: function () {\n    if (!this._debugLayer) {\n      this._debugLayer = new DebugLayer(this);\n    }\n    return this._debugLayer;\n  },\n  enumerable: true,\n  configurable: true\n});\n/**\n * Enum of inspector action tab\n */\nexport var DebugLayerTab;\n(function (DebugLayerTab) {\n  /**\n   * Properties tag (default)\n   */\n  DebugLayerTab[DebugLayerTab[\"Properties\"] = 0] = \"Properties\";\n  /**\n   * Debug tab\n   */\n  DebugLayerTab[DebugLayerTab[\"Debug\"] = 1] = \"Debug\";\n  /**\n   * Statistics tab\n   */\n  DebugLayerTab[DebugLayerTab[\"Statistics\"] = 2] = \"Statistics\";\n  /**\n   * Tools tab\n   */\n  DebugLayerTab[DebugLayerTab[\"Tools\"] = 3] = \"Tools\";\n  /**\n   * Settings tab\n   */\n  DebugLayerTab[DebugLayerTab[\"Settings\"] = 4] = \"Settings\";\n})(DebugLayerTab || (DebugLayerTab = {}));\n/**\n * The debug layer (aka Inspector) is the go to tool in order to better understand\n * what is happening in your scene\n * @see https://doc.babylonjs.com/toolsAndResources/inspector\n */\nexport class DebugLayer {\n  /**\n   * Observable triggered when a property is changed through the inspector.\n   */\n  get onPropertyChangedObservable() {\n    if (this.BJSINSPECTOR && this.BJSINSPECTOR.Inspector) {\n      return this.BJSINSPECTOR.Inspector.OnPropertyChangedObservable;\n    }\n    if (!this._onPropertyChangedObservable) {\n      this._onPropertyChangedObservable = new Observable();\n    }\n    return this._onPropertyChangedObservable;\n  }\n  /**\n   * Observable triggered when the selection is changed through the inspector.\n   */\n  get onSelectionChangedObservable() {\n    if (this.BJSINSPECTOR && this.BJSINSPECTOR.Inspector) {\n      return this.BJSINSPECTOR.Inspector.OnSelectionChangeObservable;\n    }\n    if (!this._onSelectionChangedObservable) {\n      this._onSelectionChangedObservable = new Observable();\n    }\n    return this._onSelectionChangedObservable;\n  }\n  /**\n   * Instantiates a new debug layer.\n   * The debug layer (aka Inspector) is the go to tool in order to better understand\n   * what is happening in your scene\n   * @see https://doc.babylonjs.com/toolsAndResources/inspector\n   * @param scene Defines the scene to inspect\n   */\n  constructor(scene) {\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    this.BJSINSPECTOR = this._getGlobalInspector();\n    this._scene = scene || EngineStore.LastCreatedScene;\n    if (!this._scene) {\n      return;\n    }\n    this._scene.onDisposeObservable.add(() => {\n      // Debug layer\n      if (this._scene._debugLayer) {\n        this._scene._debugLayer.hide();\n      }\n    });\n  }\n  /**\n   * Creates the inspector window.\n   * @param config\n   */\n  _createInspector(config) {\n    if (this.isVisible()) {\n      return;\n    }\n    if (this._onPropertyChangedObservable) {\n      for (const observer of this._onPropertyChangedObservable.observers) {\n        this.BJSINSPECTOR.Inspector.OnPropertyChangedObservable.add(observer);\n      }\n      this._onPropertyChangedObservable.clear();\n      this._onPropertyChangedObservable = undefined;\n    }\n    if (this._onSelectionChangedObservable) {\n      for (const observer of this._onSelectionChangedObservable.observers) {\n        this.BJSINSPECTOR.Inspector.OnSelectionChangedObservable.add(observer);\n      }\n      this._onSelectionChangedObservable.clear();\n      this._onSelectionChangedObservable = undefined;\n    }\n    const userOptions = {\n      ...DebugLayer.Config,\n      ...config\n    };\n    this.BJSINSPECTOR = this.BJSINSPECTOR || this._getGlobalInspector();\n    this.BJSINSPECTOR.Inspector.Show(this._scene, userOptions);\n  }\n  /**\n   * Select a specific entity in the scene explorer and highlight a specific block in that entity property grid\n   * @param entity defines the entity to select\n   * @param lineContainerTitles defines the specific blocks to highlight (could be a string or an array of strings)\n   */\n  select(entity, lineContainerTitles) {\n    if (this.BJSINSPECTOR) {\n      if (lineContainerTitles) {\n        if (Object.prototype.toString.call(lineContainerTitles) == \"[object String]\") {\n          this.BJSINSPECTOR.Inspector.MarkLineContainerTitleForHighlighting(lineContainerTitles);\n        } else {\n          this.BJSINSPECTOR.Inspector.MarkMultipleLineContainerTitlesForHighlighting(lineContainerTitles);\n        }\n      }\n      this.BJSINSPECTOR.Inspector.OnSelectionChangeObservable.notifyObservers(entity);\n    }\n  }\n  /**\n   * Get the inspector from bundle or global\n   * @returns the inspector instance if found otherwise, null\n   */\n  _getGlobalInspector() {\n    // UMD Global name detection from Webpack Bundle UMD Name.\n    if (typeof INSPECTOR !== \"undefined\") {\n      return INSPECTOR;\n    }\n    // In case of module let s check the global emitted from the Inspector entry point.\n    if (typeof BABYLON !== \"undefined\" && typeof BABYLON.Inspector !== \"undefined\") {\n      return BABYLON;\n    }\n    return undefined;\n  }\n  /**\n   * Get if the inspector is visible or not.\n   * @returns true if visible otherwise, false\n   */\n  isVisible() {\n    return this.BJSINSPECTOR && this.BJSINSPECTOR.Inspector.IsVisible;\n  }\n  /**\n   * Hide the inspector and close its window.\n   */\n  hide() {\n    if (this.BJSINSPECTOR) {\n      this.BJSINSPECTOR.Inspector.Hide();\n    }\n  }\n  /**\n   * Update the scene in the inspector\n   */\n  setAsActiveScene() {\n    if (this.BJSINSPECTOR) {\n      this.BJSINSPECTOR.Inspector._SetNewScene(this._scene);\n    }\n  }\n  /**\n   * Launch the debugLayer.\n   * @param config Define the configuration of the inspector\n   * @returns a promise fulfilled when the debug layer is visible\n   */\n  show(config) {\n    return new Promise(resolve => {\n      if (typeof this.BJSINSPECTOR == \"undefined\") {\n        const inspectorUrl = config && config.inspectorURL ? config.inspectorURL : DebugLayer.InspectorURL;\n        // Load inspector and add it to the DOM\n        Tools.LoadBabylonScript(inspectorUrl, () => {\n          this._createInspector(config);\n          resolve(this);\n        });\n      } else {\n        // Otherwise creates the inspector\n        this._createInspector(config);\n        resolve(this);\n      }\n    });\n  }\n}\n/**\n * Define the url to get the inspector script from.\n * By default it uses the babylonjs CDN.\n * @ignoreNaming\n */\nDebugLayer.InspectorURL = `${Tools._DefaultCdnUrl}/v${Engine.Version}/inspector/babylon.inspector.bundle.js`;\n/**\n * The default configuration of the inspector\n */\nDebugLayer.Config = {\n  overlay: false,\n  showExplorer: true,\n  showInspector: true,\n  embedMode: false,\n  handleResize: true,\n  enablePopup: true\n};\n//# sourceMappingURL=debugLayer.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}