{"ast":null,"code":"import { Decode } from \"./stringTools.js\";\n/**\n * Utility class for reading from a data buffer\n */\nexport class DataReader {\n  /**\n   * Constructor\n   * @param buffer The buffer to read\n   */\n  constructor(buffer) {\n    /**\n     * The current byte offset from the beginning of the data buffer.\n     */\n    this.byteOffset = 0;\n    this.buffer = buffer;\n  }\n  /**\n   * Loads the given byte length.\n   * @param byteLength The byte length to load\n   * @returns A promise that resolves when the load is complete\n   */\n  loadAsync(byteLength) {\n    return this.buffer.readAsync(this.byteOffset, byteLength).then(data => {\n      this._dataView = new DataView(data.buffer, data.byteOffset, data.byteLength);\n      this._dataByteOffset = 0;\n    });\n  }\n  /**\n   * Read a unsigned 32-bit integer from the currently loaded data range.\n   * @returns The 32-bit integer read\n   */\n  readUint32() {\n    const value = this._dataView.getUint32(this._dataByteOffset, true);\n    this._dataByteOffset += 4;\n    this.byteOffset += 4;\n    return value;\n  }\n  /**\n   * Read a byte array from the currently loaded data range.\n   * @param byteLength The byte length to read\n   * @returns The byte array read\n   */\n  readUint8Array(byteLength) {\n    const value = new Uint8Array(this._dataView.buffer, this._dataView.byteOffset + this._dataByteOffset, byteLength);\n    this._dataByteOffset += byteLength;\n    this.byteOffset += byteLength;\n    return value;\n  }\n  /**\n   * Read a string from the currently loaded data range.\n   * @param byteLength The byte length to read\n   * @returns The string read\n   */\n  readString(byteLength) {\n    return Decode(this.readUint8Array(byteLength));\n  }\n  /**\n   * Skips the given byte length the currently loaded data range.\n   * @param byteLength The byte length to skip\n   */\n  skipBytes(byteLength) {\n    this._dataByteOffset += byteLength;\n    this.byteOffset += byteLength;\n  }\n}\n//# sourceMappingURL=dataReader.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}