{"ast":null,"code":"import { ThinEngine } from \"../../Engines/thinEngine.js\";\nimport { InternalTexture, InternalTextureSource } from \"../../Materials/Textures/internalTexture.js\";\nThinEngine.prototype.createDynamicTexture = function (width, height, generateMipMaps, samplingMode) {\n  const texture = new InternalTexture(this, InternalTextureSource.Dynamic);\n  texture.baseWidth = width;\n  texture.baseHeight = height;\n  if (generateMipMaps) {\n    width = this.needPOTTextures ? ThinEngine.GetExponentOfTwo(width, this._caps.maxTextureSize) : width;\n    height = this.needPOTTextures ? ThinEngine.GetExponentOfTwo(height, this._caps.maxTextureSize) : height;\n  }\n  //  this.resetTextureCache();\n  texture.width = width;\n  texture.height = height;\n  texture.isReady = false;\n  texture.generateMipMaps = generateMipMaps;\n  texture.samplingMode = samplingMode;\n  this.updateTextureSamplingMode(samplingMode, texture);\n  this._internalTexturesCache.push(texture);\n  return texture;\n};\nThinEngine.prototype.updateDynamicTexture = function (texture, source, invertY, premulAlpha = false, format, forceBindTexture = false,\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nallowGPUOptimization = false) {\n  if (!texture) {\n    return;\n  }\n  const gl = this._gl;\n  const target = gl.TEXTURE_2D;\n  const wasPreviouslyBound = this._bindTextureDirectly(target, texture, true, forceBindTexture);\n  this._unpackFlipY(invertY === undefined ? texture.invertY : invertY);\n  if (premulAlpha) {\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);\n  }\n  const textureType = this._getWebGLTextureType(texture.type);\n  const glformat = this._getInternalFormat(format ? format : texture.format);\n  const internalFormat = this._getRGBABufferInternalSizedFormat(texture.type, glformat);\n  gl.texImage2D(target, 0, internalFormat, glformat, textureType, source);\n  if (texture.generateMipMaps) {\n    gl.generateMipmap(target);\n  }\n  if (!wasPreviouslyBound) {\n    this._bindTextureDirectly(target, null);\n  }\n  if (premulAlpha) {\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 0);\n  }\n  if (format) {\n    texture.format = format;\n  }\n  texture._dynamicTextureSource = source;\n  texture._premulAlpha = premulAlpha;\n  texture.invertY = invertY || false;\n  texture.isReady = true;\n};\n//# sourceMappingURL=engine.dynamicTexture.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}