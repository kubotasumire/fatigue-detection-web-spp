{"ast":null,"code":"import { useState, useEffect, useRef, useCallback } from 'react';\n\n/**\n * ゲーム制限時間管理フック\n */\nexport const useGameTimer = (difficulty, onTimeUp) => {\n  // 難易度ごとの制限時間（秒）\n  const timeLimits = {\n    easy: 2 * 60,\n    // 簡単: 2分\n    medium: 4 * 60,\n    // 程よい: 4分\n    hard: 6 * 60 // 難しい: 6分\n  };\n  const timeLimit = timeLimits[difficulty] || 600;\n  const [remainingTime, setRemainingTime] = useState(timeLimit);\n  const [isRunning, setIsRunning] = useState(true);\n  const intervalRef = useRef(null);\n  const startTimeRef = useRef(Date.now());\n  const stop = useCallback(() => {\n    setIsRunning(false);\n    if (intervalRef.current) {\n      clearInterval(intervalRef.current);\n    }\n  }, []);\n  const start = useCallback(() => {\n    setIsRunning(true);\n    startTimeRef.current = Date.now();\n  }, []);\n  useEffect(() => {\n    if (!isRunning) return;\n    intervalRef.current = setInterval(() => {\n      const elapsed = Math.floor((Date.now() - startTimeRef.current) / 1000);\n      const remaining = Math.max(0, timeLimit - elapsed);\n      setRemainingTime(remaining);\n      if (remaining === 0) {\n        setIsRunning(false);\n        if (onTimeUp) {\n          onTimeUp();\n        }\n      }\n    }, 100);\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, [isRunning, timeLimit, onTimeUp]);\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n  return {\n    remainingTime,\n    formattedTime: formatTime(remainingTime),\n    isRunning,\n    stop,\n    start,\n    timeLimit\n  };\n};\nexport default useGameTimer;","map":{"version":3,"names":["useState","useEffect","useRef","useCallback","useGameTimer","difficulty","onTimeUp","timeLimits","easy","medium","hard","timeLimit","remainingTime","setRemainingTime","isRunning","setIsRunning","intervalRef","startTimeRef","Date","now","stop","current","clearInterval","start","setInterval","elapsed","Math","floor","remaining","max","formatTime","seconds","mins","secs","toString","padStart","formattedTime"],"sources":["/Users/kubotasumire/Univ./卒論/s-2/fatigue-detection-web-spp/frontend/src/hooks/useGameTimer.js"],"sourcesContent":["import { useState, useEffect, useRef, useCallback } from 'react';\n\n/**\n * ゲーム制限時間管理フック\n */\nexport const useGameTimer = (difficulty, onTimeUp) => {\n  // 難易度ごとの制限時間（秒）\n  const timeLimits = {\n    easy: 2 * 60,      // 簡単: 2分\n    medium: 4 * 60,    // 程よい: 4分\n    hard: 6 * 60       // 難しい: 6分\n  };\n\n  const timeLimit = timeLimits[difficulty] || 600;\n  const [remainingTime, setRemainingTime] = useState(timeLimit);\n  const [isRunning, setIsRunning] = useState(true);\n  const intervalRef = useRef(null);\n  const startTimeRef = useRef(Date.now());\n\n  const stop = useCallback(() => {\n    setIsRunning(false);\n    if (intervalRef.current) {\n      clearInterval(intervalRef.current);\n    }\n  }, []);\n\n  const start = useCallback(() => {\n    setIsRunning(true);\n    startTimeRef.current = Date.now();\n  }, []);\n\n  useEffect(() => {\n    if (!isRunning) return;\n\n    intervalRef.current = setInterval(() => {\n      const elapsed = Math.floor((Date.now() - startTimeRef.current) / 1000);\n      const remaining = Math.max(0, timeLimit - elapsed);\n\n      setRemainingTime(remaining);\n\n      if (remaining === 0) {\n        setIsRunning(false);\n        if (onTimeUp) {\n          onTimeUp();\n        }\n      }\n    }, 100);\n\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, [isRunning, timeLimit, onTimeUp]);\n\n  const formatTime = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  return {\n    remainingTime,\n    formattedTime: formatTime(remainingTime),\n    isRunning,\n    stop,\n    start,\n    timeLimit\n  };\n};\n\nexport default useGameTimer;\n"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,MAAM,EAAEC,WAAW,QAAQ,OAAO;;AAEhE;AACA;AACA;AACA,OAAO,MAAMC,YAAY,GAAGA,CAACC,UAAU,EAAEC,QAAQ,KAAK;EACpD;EACA,MAAMC,UAAU,GAAG;IACjBC,IAAI,EAAE,CAAC,GAAG,EAAE;IAAO;IACnBC,MAAM,EAAE,CAAC,GAAG,EAAE;IAAK;IACnBC,IAAI,EAAE,CAAC,GAAG,EAAE,CAAO;EACrB,CAAC;EAED,MAAMC,SAAS,GAAGJ,UAAU,CAACF,UAAU,CAAC,IAAI,GAAG;EAC/C,MAAM,CAACO,aAAa,EAAEC,gBAAgB,CAAC,GAAGb,QAAQ,CAACW,SAAS,CAAC;EAC7D,MAAM,CAACG,SAAS,EAAEC,YAAY,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAMgB,WAAW,GAAGd,MAAM,CAAC,IAAI,CAAC;EAChC,MAAMe,YAAY,GAAGf,MAAM,CAACgB,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC;EAEvC,MAAMC,IAAI,GAAGjB,WAAW,CAAC,MAAM;IAC7BY,YAAY,CAAC,KAAK,CAAC;IACnB,IAAIC,WAAW,CAACK,OAAO,EAAE;MACvBC,aAAa,CAACN,WAAW,CAACK,OAAO,CAAC;IACpC;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAME,KAAK,GAAGpB,WAAW,CAAC,MAAM;IAC9BY,YAAY,CAAC,IAAI,CAAC;IAClBE,YAAY,CAACI,OAAO,GAAGH,IAAI,CAACC,GAAG,CAAC,CAAC;EACnC,CAAC,EAAE,EAAE,CAAC;EAENlB,SAAS,CAAC,MAAM;IACd,IAAI,CAACa,SAAS,EAAE;IAEhBE,WAAW,CAACK,OAAO,GAAGG,WAAW,CAAC,MAAM;MACtC,MAAMC,OAAO,GAAGC,IAAI,CAACC,KAAK,CAAC,CAACT,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGF,YAAY,CAACI,OAAO,IAAI,IAAI,CAAC;MACtE,MAAMO,SAAS,GAAGF,IAAI,CAACG,GAAG,CAAC,CAAC,EAAElB,SAAS,GAAGc,OAAO,CAAC;MAElDZ,gBAAgB,CAACe,SAAS,CAAC;MAE3B,IAAIA,SAAS,KAAK,CAAC,EAAE;QACnBb,YAAY,CAAC,KAAK,CAAC;QACnB,IAAIT,QAAQ,EAAE;UACZA,QAAQ,CAAC,CAAC;QACZ;MACF;IACF,CAAC,EAAE,GAAG,CAAC;IAEP,OAAO,MAAM;MACX,IAAIU,WAAW,CAACK,OAAO,EAAE;QACvBC,aAAa,CAACN,WAAW,CAACK,OAAO,CAAC;MACpC;IACF,CAAC;EACH,CAAC,EAAE,CAACP,SAAS,EAAEH,SAAS,EAAEL,QAAQ,CAAC,CAAC;EAEpC,MAAMwB,UAAU,GAAIC,OAAO,IAAK;IAC9B,MAAMC,IAAI,GAAGN,IAAI,CAACC,KAAK,CAACI,OAAO,GAAG,EAAE,CAAC;IACrC,MAAME,IAAI,GAAGF,OAAO,GAAG,EAAE;IACzB,OAAO,GAAGC,IAAI,CAACE,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,IAAIF,IAAI,CAACC,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE;EAClF,CAAC;EAED,OAAO;IACLvB,aAAa;IACbwB,aAAa,EAAEN,UAAU,CAAClB,aAAa,CAAC;IACxCE,SAAS;IACTM,IAAI;IACJG,KAAK;IACLZ;EACF,CAAC;AACH,CAAC;AAED,eAAeP,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}