{"ast":null,"code":"/** @internal */\nexport class NativeDataStream {\n  constructor() {\n    const buffer = new ArrayBuffer(NativeDataStream.DEFAULT_BUFFER_SIZE);\n    this._uint32s = new Uint32Array(buffer);\n    this._int32s = new Int32Array(buffer);\n    this._float32s = new Float32Array(buffer);\n    this._length = NativeDataStream.DEFAULT_BUFFER_SIZE / 4;\n    this._position = 0;\n    this._nativeDataStream = new _native.NativeDataStream(() => {\n      this._flush();\n    });\n  }\n  /**\n   * Writes a uint32 to the stream\n   * @param value the value to write\n   */\n  writeUint32(value) {\n    this._flushIfNecessary(1);\n    this._uint32s[this._position++] = value;\n  }\n  /**\n   * Writes an int32 to the stream\n   * @param value the value to write\n   */\n  writeInt32(value) {\n    this._flushIfNecessary(1);\n    this._int32s[this._position++] = value;\n  }\n  /**\n   * Writes a float32 to the stream\n   * @param value the value to write\n   */\n  writeFloat32(value) {\n    this._flushIfNecessary(1);\n    this._float32s[this._position++] = value;\n  }\n  /**\n   * Writes a uint32 array to the stream\n   * @param values the values to write\n   */\n  writeUint32Array(values) {\n    this._flushIfNecessary(1 + values.length);\n    this._uint32s[this._position++] = values.length;\n    this._uint32s.set(values, this._position);\n    this._position += values.length;\n  }\n  /**\n   * Writes an int32 array to the stream\n   * @param values the values to write\n   */\n  writeInt32Array(values) {\n    this._flushIfNecessary(1 + values.length);\n    this._uint32s[this._position++] = values.length;\n    this._int32s.set(values, this._position);\n    this._position += values.length;\n  }\n  /**\n   * Writes a float32 array to the stream\n   * @param values the values to write\n   */\n  writeFloat32Array(values) {\n    this._flushIfNecessary(1 + values.length);\n    this._uint32s[this._position++] = values.length;\n    this._float32s.set(values, this._position);\n    this._position += values.length;\n  }\n  /**\n   * Writes native data to the stream\n   * @param handle the handle to the native data\n   */\n  writeNativeData(handle) {\n    this._flushIfNecessary(handle.length);\n    this._uint32s.set(handle, this._position);\n    this._position += handle.length;\n  }\n  /**\n   * Writes a boolean to the stream\n   * @param value the value to write\n   */\n  writeBoolean(value) {\n    this.writeUint32(value ? 1 : 0);\n  }\n  _flushIfNecessary(required) {\n    if (this._position + required > this._length) {\n      this._flush();\n    }\n  }\n  _flush() {\n    this._nativeDataStream.writeBuffer(this._uint32s.buffer, this._position);\n    this._position = 0;\n  }\n}\n// Must be multiple of 4!\n// eslint-disable-next-line @typescript-eslint/naming-convention\nNativeDataStream.DEFAULT_BUFFER_SIZE = 65536;\n//# sourceMappingURL=nativeDataStream.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}