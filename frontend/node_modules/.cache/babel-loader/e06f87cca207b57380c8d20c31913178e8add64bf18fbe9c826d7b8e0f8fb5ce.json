{"ast":null,"code":"import { FlowGraphEventBlock } from \"../../flowGraphEventBlock.js\";\nimport { Tools } from \"../../../Misc/tools.js\";\nimport { RichTypeAny } from \"../../flowGraphRichTypes.js\";\nimport { RegisterClass } from \"../../../Misc/typeStore.js\";\n/**\n * @experimental\n * A block that receives a custom event. It saves the data sent in the eventData output.\n */\nexport class FlowGraphReceiveCustomEventBlock extends FlowGraphEventBlock {\n  constructor(\n  /**\n   * the configuration of the block\n   */\n  config) {\n    super(config);\n    this.config = config;\n    for (let i = 0; i < this.config.eventData.length; i++) {\n      const dataName = this.config.eventData[i];\n      this.registerDataOutput(dataName, RichTypeAny);\n    }\n  }\n  _preparePendingTasks(context) {\n    const observable = context.configuration.coordinator.getCustomEventObservable(this.config.eventId);\n    this._eventObserver = observable.add(eventDatas => {\n      for (let i = 0; i < eventDatas.length; i++) {\n        this.dataOutputs[i].setValue(eventDatas[i], context);\n      }\n      this._execute(context);\n    });\n  }\n  _cancelPendingTasks(context) {\n    const observable = context.configuration.coordinator.getCustomEventObservable(this.config.eventId);\n    if (observable) {\n      observable.remove(this._eventObserver);\n    } else {\n      Tools.Warn(`FlowGraphReceiveCustomEventBlock: Missing observable for event ${this.config.eventId}`);\n    }\n  }\n  /**\n   * @returns class name of the block.\n   */\n  getClassName() {\n    return FlowGraphReceiveCustomEventBlock.ClassName;\n  }\n  /**\n   * Serializes this block\n   * @param serializationObject the object to serialize to\n   */\n  serialize(serializationObject) {\n    super.serialize(serializationObject);\n    serializationObject.eventId = this.config.eventId;\n    serializationObject.eventData = this.config.eventData;\n  }\n}\n/**\n * the class name of the block.\n */\nFlowGraphReceiveCustomEventBlock.ClassName = \"FGReceiveCustomEventBlock\";\nRegisterClass(FlowGraphReceiveCustomEventBlock.ClassName, FlowGraphReceiveCustomEventBlock);\n//# sourceMappingURL=flowGraphReceiveCustomEventBlock.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}