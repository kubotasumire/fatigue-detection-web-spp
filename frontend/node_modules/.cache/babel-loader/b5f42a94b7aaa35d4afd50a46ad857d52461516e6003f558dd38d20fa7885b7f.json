{"ast":null,"code":"import { AndOrNotEvaluator } from \"./andOrNotEvaluator.js\";\n/**\n * Class used to store custom tags\n */\nexport class Tags {\n  /**\n   * Adds support for tags on the given object\n   * @param obj defines the object to use\n   */\n  static EnableFor(obj) {\n    obj._tags = obj._tags || {};\n    obj.hasTags = () => {\n      return Tags.HasTags(obj);\n    };\n    obj.addTags = tagsString => {\n      return Tags.AddTagsTo(obj, tagsString);\n    };\n    obj.removeTags = tagsString => {\n      return Tags.RemoveTagsFrom(obj, tagsString);\n    };\n    obj.matchesTagsQuery = tagsQuery => {\n      return Tags.MatchesQuery(obj, tagsQuery);\n    };\n  }\n  /**\n   * Removes tags support\n   * @param obj defines the object to use\n   */\n  static DisableFor(obj) {\n    delete obj._tags;\n    delete obj.hasTags;\n    delete obj.addTags;\n    delete obj.removeTags;\n    delete obj.matchesTagsQuery;\n  }\n  /**\n   * Gets a boolean indicating if the given object has tags\n   * @param obj defines the object to use\n   * @returns a boolean\n   */\n  static HasTags(obj) {\n    if (!obj._tags) {\n      return false;\n    }\n    const tags = obj._tags;\n    for (const i in tags) {\n      if (Object.prototype.hasOwnProperty.call(tags, i)) {\n        return true;\n      }\n    }\n    return false;\n  }\n  /**\n   * Gets the tags available on a given object\n   * @param obj defines the object to use\n   * @param asString defines if the tags must be returned as a string instead of an array of strings\n   * @returns the tags\n   */\n  static GetTags(obj, asString = true) {\n    if (!obj._tags) {\n      return null;\n    }\n    if (asString) {\n      const tagsArray = [];\n      for (const tag in obj._tags) {\n        if (Object.prototype.hasOwnProperty.call(obj._tags, tag) && obj._tags[tag] === true) {\n          tagsArray.push(tag);\n        }\n      }\n      return tagsArray.join(\" \");\n    } else {\n      return obj._tags;\n    }\n  }\n  /**\n   * Adds tags to an object\n   * @param obj defines the object to use\n   * @param tagsString defines the tag string. The tags 'true' and 'false' are reserved and cannot be used as tags.\n   * A tag cannot start with '||', '&&', and '!'. It cannot contain whitespaces\n   */\n  static AddTagsTo(obj, tagsString) {\n    if (!tagsString) {\n      return;\n    }\n    if (typeof tagsString !== \"string\") {\n      return;\n    }\n    const tags = tagsString.split(\" \");\n    tags.forEach(function (tag) {\n      Tags._AddTagTo(obj, tag);\n    });\n  }\n  /**\n   * @internal\n   */\n  static _AddTagTo(obj, tag) {\n    tag = tag.trim();\n    if (tag === \"\" || tag === \"true\" || tag === \"false\") {\n      return;\n    }\n    if (tag.match(/[\\s]/) || tag.match(/^([!]|([|]|[&]){2})/)) {\n      return;\n    }\n    Tags.EnableFor(obj);\n    obj._tags[tag] = true;\n  }\n  /**\n   * Removes specific tags from a specific object\n   * @param obj defines the object to use\n   * @param tagsString defines the tags to remove\n   */\n  static RemoveTagsFrom(obj, tagsString) {\n    if (!Tags.HasTags(obj)) {\n      return;\n    }\n    const tags = tagsString.split(\" \");\n    for (const t in tags) {\n      Tags._RemoveTagFrom(obj, tags[t]);\n    }\n  }\n  /**\n   * @internal\n   */\n  static _RemoveTagFrom(obj, tag) {\n    delete obj._tags[tag];\n  }\n  /**\n   * Defines if tags hosted on an object match a given query\n   * @param obj defines the object to use\n   * @param tagsQuery defines the tag query\n   * @returns a boolean\n   */\n  static MatchesQuery(obj, tagsQuery) {\n    if (tagsQuery === undefined) {\n      return true;\n    }\n    if (tagsQuery === \"\") {\n      return Tags.HasTags(obj);\n    }\n    return AndOrNotEvaluator.Eval(tagsQuery, r => Tags.HasTags(obj) && obj._tags[r]);\n  }\n}\n//# sourceMappingURL=tags.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}