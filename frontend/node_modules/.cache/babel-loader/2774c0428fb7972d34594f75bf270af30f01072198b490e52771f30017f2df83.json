{"ast":null,"code":"import { WebXRCompositionLayerRenderTargetTextureProvider, WebXRCompositionLayerWrapper } from \"./WebXRCompositionLayer.js\";\n/**\n * Wraps xr projection layers.\n * @internal\n */\nexport class WebXRProjectionLayerWrapper extends WebXRCompositionLayerWrapper {\n  constructor(layer, isMultiview, xrGLBinding) {\n    super(() => layer.textureWidth, () => layer.textureHeight, layer, \"XRProjectionLayer\", isMultiview, sessionManager => new WebXRProjectionLayerRenderTargetTextureProvider(sessionManager, xrGLBinding, this));\n    this.layer = layer;\n  }\n}\n/**\n * Provides render target textures and other important rendering information for a given XRProjectionLayer.\n * @internal\n */\nclass WebXRProjectionLayerRenderTargetTextureProvider extends WebXRCompositionLayerRenderTargetTextureProvider {\n  constructor(_xrSessionManager, _xrWebGLBinding, layerWrapper) {\n    super(_xrSessionManager, _xrWebGLBinding, layerWrapper);\n    this.layerWrapper = layerWrapper;\n    this._projectionLayer = layerWrapper.layer;\n  }\n  _getSubImageForView(view) {\n    return this._xrWebGLBinding.getViewSubImage(this._projectionLayer, view);\n  }\n  getRenderTargetTextureForView(view) {\n    return this._getRenderTargetForSubImage(this._getSubImageForView(view), view.eye);\n  }\n  getRenderTargetTextureForEye(eye) {\n    const lastSubImage = this._lastSubImages.get(eye);\n    if (lastSubImage) {\n      return this._getRenderTargetForSubImage(lastSubImage, eye);\n    }\n    return null;\n  }\n  trySetViewportForView(viewport, view) {\n    const subImage = this._lastSubImages.get(view.eye) || this._getSubImageForView(view);\n    if (subImage) {\n      this._setViewportForSubImage(viewport, subImage);\n      return true;\n    }\n    return false;\n  }\n}\nexport const defaultXRProjectionLayerInit = {\n  textureType: \"texture\",\n  colorFormat: 0x1908 /* WebGLRenderingContext.RGBA */,\n  depthFormat: 0x88f0 /* WebGLRenderingContext.DEPTH24_STENCIL8 */,\n  scaleFactor: 1.0,\n  clearOnAccess: false\n};\n//# sourceMappingURL=WebXRProjectionLayer.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}