{"ast":null,"code":"/* eslint-disable no-console */\n/**\n * Logger used throughout the application to allow configuration of\n * the log level required for the messages.\n */\nexport class Logger {\n  static _CheckLimit(message, limit) {\n    let entry = Logger._LogLimitOutputs[message];\n    if (!entry) {\n      entry = {\n        limit,\n        current: 1\n      };\n      Logger._LogLimitOutputs[message] = entry;\n    } else {\n      entry.current++;\n    }\n    return entry.current <= entry.limit;\n  }\n  static _GenerateLimitMessage(message, level = 1) {\n    const entry = Logger._LogLimitOutputs[message];\n    if (!entry || !Logger.MessageLimitReached) {\n      return;\n    }\n    const type = this._Levels[level];\n    if (entry.current === entry.limit) {\n      Logger[type.name](Logger.MessageLimitReached.replace(/%LIMIT%/g, \"\" + entry.limit).replace(/%TYPE%/g, type.name ?? \"\"));\n    }\n  }\n  static _AddLogEntry(entry) {\n    Logger._LogCache = entry + Logger._LogCache;\n    if (Logger.OnNewCacheEntry) {\n      Logger.OnNewCacheEntry(entry);\n    }\n  }\n  static _FormatMessage(message) {\n    const padStr = i => i < 10 ? \"0\" + i : \"\" + i;\n    const date = new Date();\n    return \"[\" + padStr(date.getHours()) + \":\" + padStr(date.getMinutes()) + \":\" + padStr(date.getSeconds()) + \"]: \" + message;\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  static _LogDisabled(message, limit) {\n    // nothing to do\n  }\n  static _LogEnabled(level = 1, message, limit) {\n    // take first message if array\n    const msg = Array.isArray(message) ? message[0] : message;\n    if (limit !== undefined && !Logger._CheckLimit(msg, limit)) {\n      return;\n    }\n    const formattedMessage = Logger._FormatMessage(msg);\n    const type = this._Levels[level];\n    const optionals = Array.isArray(message) ? message.slice(1) : [];\n    type.logFunc && type.logFunc(\"BJS - \" + formattedMessage, ...optionals);\n    const entry = `<div style='color:${type.color}'>${formattedMessage}</div><br>`;\n    Logger._AddLogEntry(entry);\n    Logger._GenerateLimitMessage(msg, level);\n  }\n  /**\n   * Gets current log cache (list of logs)\n   */\n  static get LogCache() {\n    return Logger._LogCache;\n  }\n  /**\n   * Clears the log cache\n   */\n  static ClearLogCache() {\n    Logger._LogCache = \"\";\n    Logger._LogLimitOutputs = {};\n    Logger.errorsCount = 0;\n  }\n  /**\n   * Sets the current log level (MessageLogLevel / WarningLogLevel / ErrorLogLevel)\n   */\n  static set LogLevels(level) {\n    Logger.Log = Logger._LogDisabled;\n    Logger.Warn = Logger._LogDisabled;\n    Logger.Error = Logger._LogDisabled;\n    [Logger.MessageLogLevel, Logger.WarningLogLevel, Logger.ErrorLogLevel].forEach(l => {\n      if ((level & l) === l) {\n        const type = this._Levels[l];\n        Logger[type.name] = Logger._LogEnabled.bind(Logger, l);\n      }\n    });\n  }\n}\n/**\n * No log\n */\nLogger.NoneLogLevel = 0;\n/**\n * Only message logs\n */\nLogger.MessageLogLevel = 1;\n/**\n * Only warning logs\n */\nLogger.WarningLogLevel = 2;\n/**\n * Only error logs\n */\nLogger.ErrorLogLevel = 4;\n/**\n * All logs\n */\nLogger.AllLogLevel = 7;\n/**\n * Message to display when a message has been logged too many times\n */\nLogger.MessageLimitReached = \"Too many %TYPE%s (%LIMIT%), no more %TYPE%s will be reported for this message.\";\nLogger._LogCache = \"\";\nLogger._LogLimitOutputs = {};\n// levels according to the (binary) numbering.\nLogger._Levels = [{}, {\n  color: \"white\",\n  logFunc: console.log,\n  name: \"Log\"\n}, {\n  color: \"orange\",\n  logFunc: console.warn,\n  name: \"Warn\"\n}, {}, {\n  color: \"red\",\n  logFunc: console.error,\n  name: \"Error\"\n}];\n/**\n * Gets a value indicating the number of loading errors\n * @ignorenaming\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nLogger.errorsCount = 0;\n/**\n * Log a message to the console\n */\nLogger.Log = Logger._LogEnabled.bind(Logger, Logger.MessageLogLevel);\n/**\n * Write a warning message to the console\n */\nLogger.Warn = Logger._LogEnabled.bind(Logger, Logger.WarningLogLevel);\n/**\n * Write an error message to the console\n */\nLogger.Error = Logger._LogEnabled.bind(Logger, Logger.ErrorLogLevel);\n//# sourceMappingURL=logger.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}