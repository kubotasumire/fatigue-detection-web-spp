{"ast":null,"code":"import { NodeMaterialBlock } from \"../../nodeMaterialBlock.js\";\nimport { NodeMaterialBlockConnectionPointTypes } from \"../../Enums/nodeMaterialBlockConnectionPointTypes.js\";\nimport { NodeMaterialBlockTargets } from \"../../Enums/nodeMaterialBlockTargets.js\";\nimport { RegisterClass } from \"../../../../Misc/typeStore.js\";\n/**\n * Block used to output the vertex position\n */\nexport class VertexOutputBlock extends NodeMaterialBlock {\n  /**\n   * Creates a new VertexOutputBlock\n   * @param name defines the block name\n   */\n  constructor(name) {\n    super(name, NodeMaterialBlockTargets.Vertex, true);\n    this.registerInput(\"vector\", NodeMaterialBlockConnectionPointTypes.Vector4);\n  }\n  /**\n   * Gets the current class name\n   * @returns the class name\n   */\n  getClassName() {\n    return \"VertexOutputBlock\";\n  }\n  /**\n   * Gets the vector input component\n   */\n  get vector() {\n    return this._inputs[0];\n  }\n  _isLogarithmicDepthEnabled(nodeList, useLogarithmicDepth) {\n    if (useLogarithmicDepth) {\n      return true;\n    }\n    for (const node of nodeList) {\n      if (node.useLogarithmicDepth) {\n        return true;\n      }\n    }\n    return false;\n  }\n  _buildBlock(state) {\n    super._buildBlock(state);\n    const input = this.vector;\n    state.compilationString += `gl_Position = ${input.associatedVariableName};\\n`;\n    if (this._isLogarithmicDepthEnabled(state.sharedData.fragmentOutputNodes, state.sharedData.nodeMaterial.useLogarithmicDepth)) {\n      state._emitUniformFromString(\"logarithmicDepthConstant\", \"float\");\n      state._emitVaryingFromString(\"vFragmentDepth\", \"float\");\n      state.compilationString += `vFragmentDepth = 1.0 + gl_Position.w;\\n`;\n      state.compilationString += `gl_Position.z = log2(max(0.000001, vFragmentDepth)) * logarithmicDepthConstant;\\n`;\n    }\n    return this;\n  }\n}\nRegisterClass(\"BABYLON.VertexOutputBlock\", VertexOutputBlock);\n//# sourceMappingURL=vertexOutputBlock.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}