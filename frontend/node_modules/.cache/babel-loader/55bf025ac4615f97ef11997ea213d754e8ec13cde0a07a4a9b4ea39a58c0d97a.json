{"ast":null,"code":"var _jsxFileName = \"/Users/kubotasumire/Univ./\\u5352\\u8AD6/s-2/fatigue-detection-web-spp/frontend/src/components/GameScene.jsx\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useGameTimer } from '../hooks/useGameTimer';\nimport DataCollector from '../utils/dataCollector';\nimport QuizBooth from './QuizBooth';\nimport './GameScene.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GameScene = ({\n  difficulty,\n  sessionId,\n  onGameEnd,\n  onTimeUp\n}) => {\n  const containerRef = useRef(null);\n  const canvasRef = useRef(null);\n  const {\n    formattedTime,\n    remainingTime\n  } = useGameTimer(difficulty, onTimeUp);\n  const dataCollectorRef = useRef(null);\n  const quizBoothsRef = useRef([]);\n  const activeQuizRef = useRef(null);\n  const [quizzes, setQuizzes] = useState([]);\n  const [solvedQuizzes, setSolvedQuizzes] = useState(new Set());\n  const [activeQuizId, setActiveQuizId] = useState(null);\n  const [isInitialized, setIsInitialized] = useState(false);\n\n  // Canvas ÂàùÊúüÂåñ\n  useEffect(() => {\n    if (!containerRef.current || isInitialized) return;\n    const canvas = document.createElement('canvas');\n    canvas.width = containerRef.current.clientWidth || window.innerWidth;\n    canvas.height = containerRef.current.clientHeight || window.innerHeight;\n    canvas.style.display = 'block';\n    canvas.style.width = '100%';\n    canvas.style.height = '100%';\n    containerRef.current.appendChild(canvas);\n    canvasRef.current = canvas;\n    console.log('üé® Canvas initialized:', {\n      width: canvas.width,\n      height: canvas.height\n    });\n    setIsInitialized(true);\n  }, [isInitialized]);\n\n  // „ÇØ„Ç§„Ç∫„Éá„Éº„ÇøÂèñÂæó\n  useEffect(() => {\n    const fetchQuizzes = async () => {\n      try {\n        var _data$quizzes;\n        const response = await fetch(`http://localhost:5001/api/quiz/difficulty/${difficulty}`);\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n        console.log(`Loaded ${((_data$quizzes = data.quizzes) === null || _data$quizzes === void 0 ? void 0 : _data$quizzes.length) || 0} quizzes for difficulty: ${difficulty}`);\n        setQuizzes(data.quizzes || []);\n      } catch (error) {\n        console.error('Failed to fetch quizzes:', error);\n        setQuizzes([]);\n      }\n    };\n    if (difficulty) {\n      fetchQuizzes();\n    }\n  }, [difficulty]);\n\n  // Canvas „É¨„É≥„ÉÄ„É™„É≥„Ç∞\n  useEffect(() => {\n    if (!canvasRef.current || quizzes.length === 0) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n\n    // ËÉåÊôØËâ≤\n    ctx.fillStyle = '#0f0f2e';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    // „Ç∞„É™„ÉÉ„ÉâÊèèÁîª\n    ctx.strokeStyle = '#333366';\n    ctx.lineWidth = 1;\n    const gridSize = 40;\n    for (let i = 0; i < canvas.width; i += gridSize) {\n      ctx.beginPath();\n      ctx.moveTo(i, 0);\n      ctx.lineTo(i, canvas.height);\n      ctx.stroke();\n    }\n    for (let i = 0; i < canvas.height; i += gridSize) {\n      ctx.beginPath();\n      ctx.moveTo(0, i);\n      ctx.lineTo(canvas.width, i);\n      ctx.stroke();\n    }\n\n    // „ÇØ„Ç§„Ç∫„Éñ„Éº„Çπ„ÇíÊèèÁîªÔºàÂÜÜÂΩ¢ÈÖçÁΩÆÔºâ\n    const centerX = canvas.width / 2;\n    const centerY = canvas.height / 2;\n    const radius = Math.min(canvas.width, canvas.height) / 3;\n    quizBoothsRef.current = quizzes.map((quiz, index) => {\n      const angle = index / quizzes.length * Math.PI * 2 - Math.PI / 2;\n      const x = centerX + Math.cos(angle) * radius;\n      const y = centerY + Math.sin(angle) * radius;\n      const boothSize = 60;\n\n      // „Éñ„Éº„Çπ„ÅåÊó¢„Å´Ëß£„Åã„Çå„Å¶„ÅÑ„Çã„Åã„ÉÅ„Çß„ÉÉ„ÇØ\n      const isSolved = solvedQuizzes.has(quiz.id);\n\n      // „Éñ„Éº„Çπ„ÅÆËÉåÊôØËâ≤\n      ctx.fillStyle = isSolved ? '#444466' : '#ffd700';\n      ctx.fillRect(x - boothSize / 2, y - boothSize / 2, boothSize, boothSize);\n\n      // „Éñ„Éº„ÇπÂë®Ëæ∫„ÅÆÊû†\n      ctx.strokeStyle = isSolved ? '#666688' : '#ff9500';\n      ctx.lineWidth = 2;\n      ctx.strokeRect(x - boothSize / 2, y - boothSize / 2, boothSize, boothSize);\n\n      // „ÇØ„Ç§„Ç∫Áï™Âè∑„ÇíÊèèÁîª\n      ctx.fillStyle = '#000000';\n      ctx.font = 'bold 20px Arial';\n      ctx.textAlign = 'center';\n      ctx.textBaseline = 'middle';\n      ctx.fillText(quiz.id, x, y);\n      return {\n        id: quiz.id,\n        x,\n        y,\n        size: boothSize\n      };\n    });\n    console.log('üé® Canvas rendered with', quizBoothsRef.current.length, 'booths');\n  }, [quizzes, solvedQuizzes]);\n\n  // „Éû„Ç¶„Çπ„ÇØ„É™„ÉÉ„ÇØÂá¶ÁêÜ\n  useEffect(() => {\n    var _containerRef$current;\n    if (!canvasRef.current || quizBoothsRef.current.length === 0) return;\n    const handleMouseClick = event => {\n      const canvas = canvasRef.current;\n      const rect = canvas.getBoundingClientRect();\n      const clickX = event.clientX - rect.left;\n      const clickY = event.clientY - rect.top;\n      for (const booth of quizBoothsRef.current) {\n        const dx = clickX - booth.x;\n        const dy = clickY - booth.y;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n        if (distance < booth.size / 2 && !solvedQuizzes.has(booth.id)) {\n          console.log(`Clicked booth: ${booth.id}`);\n          setActiveQuizId(booth.id);\n          activeQuizRef.current = booth.id;\n          break;\n        }\n      }\n    };\n    (_containerRef$current = containerRef.current) === null || _containerRef$current === void 0 ? void 0 : _containerRef$current.addEventListener('click', handleMouseClick);\n    return () => {\n      var _containerRef$current2;\n      (_containerRef$current2 = containerRef.current) === null || _containerRef$current2 === void 0 ? void 0 : _containerRef$current2.removeEventListener('click', handleMouseClick);\n    };\n  }, [solvedQuizzes]);\n\n  // „Éá„Éº„ÇøÂèéÈõÜÈñãÂßã\n  useEffect(() => {\n    if (!isInitialized || !sessionId) return;\n    dataCollectorRef.current = new DataCollector(sessionId);\n    dataCollectorRef.current.start();\n    return () => {\n      if (dataCollectorRef.current) {\n        dataCollectorRef.current.stop();\n      }\n    };\n  }, [isInitialized, sessionId]);\n  const handleQuizClose = async (quizId, isCorrect) => {\n    setSolvedQuizzes(prev => new Set(prev).add(quizId));\n    setActiveQuizId(null);\n\n    // „Åô„Åπ„Å¶„ÅÆ„ÇØ„Ç§„Ç∫„ÇíËß£„ÅÑ„Åü„ÅãÁ¢∫Ë™ç\n    if (solvedQuizzes.size === quizzes.length - 1) {\n      onGameEnd({\n        reason: 'completed'\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"game-scene\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef,\n      className: \"three-container\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-ui\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `timer ${remainingTime < 60 ? 'warning' : ''}`,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"label\",\n          children: \"\\u5236\\u9650\\u6642\\u9593:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"time\",\n          children: formattedTime\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"progress\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"label\",\n          children: \"\\u89E3\\u3044\\u305F\\u554F\\u984C:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"count\",\n          children: [solvedQuizzes.size, \" / \", quizzes.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this), activeQuizId && /*#__PURE__*/_jsxDEV(QuizBooth, {\n        quiz: quizzes.find(q => q.id === activeQuizId),\n        difficulty: difficulty,\n        onClose: handleQuizClose,\n        dataCollector: dataCollectorRef.current\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 179,\n    columnNumber: 5\n  }, this);\n};\nexport default GameScene;","map":{"version":3,"names":["React","useEffect","useRef","useState","useGameTimer","DataCollector","QuizBooth","jsxDEV","_jsxDEV","GameScene","difficulty","sessionId","onGameEnd","onTimeUp","containerRef","canvasRef","formattedTime","remainingTime","dataCollectorRef","quizBoothsRef","activeQuizRef","quizzes","setQuizzes","solvedQuizzes","setSolvedQuizzes","Set","activeQuizId","setActiveQuizId","isInitialized","setIsInitialized","current","canvas","document","createElement","width","clientWidth","window","innerWidth","height","clientHeight","innerHeight","style","display","appendChild","console","log","fetchQuizzes","_data$quizzes","response","fetch","ok","Error","status","data","json","length","error","ctx","getContext","fillStyle","fillRect","strokeStyle","lineWidth","gridSize","i","beginPath","moveTo","lineTo","stroke","centerX","centerY","radius","Math","min","map","quiz","index","angle","PI","x","cos","y","sin","boothSize","isSolved","has","id","strokeRect","font","textAlign","textBaseline","fillText","size","_containerRef$current","handleMouseClick","event","rect","getBoundingClientRect","clickX","clientX","left","clickY","clientY","top","booth","dx","dy","distance","sqrt","addEventListener","_containerRef$current2","removeEventListener","start","stop","handleQuizClose","quizId","isCorrect","prev","add","reason","className","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","find","q","onClose","dataCollector"],"sources":["/Users/kubotasumire/Univ./ÂçíË´ñ/s-2/fatigue-detection-web-spp/frontend/src/components/GameScene.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { useGameTimer } from '../hooks/useGameTimer';\nimport DataCollector from '../utils/dataCollector';\nimport QuizBooth from './QuizBooth';\nimport './GameScene.css';\n\nconst GameScene = ({ difficulty, sessionId, onGameEnd, onTimeUp }) => {\n  const containerRef = useRef(null);\n  const canvasRef = useRef(null);\n  const { formattedTime, remainingTime } = useGameTimer(difficulty, onTimeUp);\n  const dataCollectorRef = useRef(null);\n  const quizBoothsRef = useRef([]);\n  const activeQuizRef = useRef(null);\n\n  const [quizzes, setQuizzes] = useState([]);\n  const [solvedQuizzes, setSolvedQuizzes] = useState(new Set());\n  const [activeQuizId, setActiveQuizId] = useState(null);\n  const [isInitialized, setIsInitialized] = useState(false);\n\n  // Canvas ÂàùÊúüÂåñ\n  useEffect(() => {\n    if (!containerRef.current || isInitialized) return;\n\n    const canvas = document.createElement('canvas');\n    canvas.width = containerRef.current.clientWidth || window.innerWidth;\n    canvas.height = containerRef.current.clientHeight || window.innerHeight;\n    canvas.style.display = 'block';\n    canvas.style.width = '100%';\n    canvas.style.height = '100%';\n\n    containerRef.current.appendChild(canvas);\n    canvasRef.current = canvas;\n\n    console.log('üé® Canvas initialized:', { width: canvas.width, height: canvas.height });\n    setIsInitialized(true);\n  }, [isInitialized]);\n\n  // „ÇØ„Ç§„Ç∫„Éá„Éº„ÇøÂèñÂæó\n  useEffect(() => {\n    const fetchQuizzes = async () => {\n      try {\n        const response = await fetch(`http://localhost:5001/api/quiz/difficulty/${difficulty}`);\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n        console.log(`Loaded ${data.quizzes?.length || 0} quizzes for difficulty: ${difficulty}`);\n        setQuizzes(data.quizzes || []);\n      } catch (error) {\n        console.error('Failed to fetch quizzes:', error);\n        setQuizzes([]);\n      }\n    };\n\n    if (difficulty) {\n      fetchQuizzes();\n    }\n  }, [difficulty]);\n\n  // Canvas „É¨„É≥„ÉÄ„É™„É≥„Ç∞\n  useEffect(() => {\n    if (!canvasRef.current || quizzes.length === 0) return;\n\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n\n    // ËÉåÊôØËâ≤\n    ctx.fillStyle = '#0f0f2e';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    // „Ç∞„É™„ÉÉ„ÉâÊèèÁîª\n    ctx.strokeStyle = '#333366';\n    ctx.lineWidth = 1;\n    const gridSize = 40;\n    for (let i = 0; i < canvas.width; i += gridSize) {\n      ctx.beginPath();\n      ctx.moveTo(i, 0);\n      ctx.lineTo(i, canvas.height);\n      ctx.stroke();\n    }\n    for (let i = 0; i < canvas.height; i += gridSize) {\n      ctx.beginPath();\n      ctx.moveTo(0, i);\n      ctx.lineTo(canvas.width, i);\n      ctx.stroke();\n    }\n\n    // „ÇØ„Ç§„Ç∫„Éñ„Éº„Çπ„ÇíÊèèÁîªÔºàÂÜÜÂΩ¢ÈÖçÁΩÆÔºâ\n    const centerX = canvas.width / 2;\n    const centerY = canvas.height / 2;\n    const radius = Math.min(canvas.width, canvas.height) / 3;\n\n    quizBoothsRef.current = quizzes.map((quiz, index) => {\n      const angle = (index / quizzes.length) * Math.PI * 2 - Math.PI / 2;\n      const x = centerX + Math.cos(angle) * radius;\n      const y = centerY + Math.sin(angle) * radius;\n      const boothSize = 60;\n\n      // „Éñ„Éº„Çπ„ÅåÊó¢„Å´Ëß£„Åã„Çå„Å¶„ÅÑ„Çã„Åã„ÉÅ„Çß„ÉÉ„ÇØ\n      const isSolved = solvedQuizzes.has(quiz.id);\n\n      // „Éñ„Éº„Çπ„ÅÆËÉåÊôØËâ≤\n      ctx.fillStyle = isSolved ? '#444466' : '#ffd700';\n      ctx.fillRect(x - boothSize / 2, y - boothSize / 2, boothSize, boothSize);\n\n      // „Éñ„Éº„ÇπÂë®Ëæ∫„ÅÆÊû†\n      ctx.strokeStyle = isSolved ? '#666688' : '#ff9500';\n      ctx.lineWidth = 2;\n      ctx.strokeRect(x - boothSize / 2, y - boothSize / 2, boothSize, boothSize);\n\n      // „ÇØ„Ç§„Ç∫Áï™Âè∑„ÇíÊèèÁîª\n      ctx.fillStyle = '#000000';\n      ctx.font = 'bold 20px Arial';\n      ctx.textAlign = 'center';\n      ctx.textBaseline = 'middle';\n      ctx.fillText(quiz.id, x, y);\n\n      return { id: quiz.id, x, y, size: boothSize };\n    });\n\n    console.log('üé® Canvas rendered with', quizBoothsRef.current.length, 'booths');\n  }, [quizzes, solvedQuizzes]);\n\n  // „Éû„Ç¶„Çπ„ÇØ„É™„ÉÉ„ÇØÂá¶ÁêÜ\n  useEffect(() => {\n    if (!canvasRef.current || quizBoothsRef.current.length === 0) return;\n\n    const handleMouseClick = (event) => {\n      const canvas = canvasRef.current;\n      const rect = canvas.getBoundingClientRect();\n      const clickX = event.clientX - rect.left;\n      const clickY = event.clientY - rect.top;\n\n      for (const booth of quizBoothsRef.current) {\n        const dx = clickX - booth.x;\n        const dy = clickY - booth.y;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n\n        if (distance < booth.size / 2 && !solvedQuizzes.has(booth.id)) {\n          console.log(`Clicked booth: ${booth.id}`);\n          setActiveQuizId(booth.id);\n          activeQuizRef.current = booth.id;\n          break;\n        }\n      }\n    };\n\n    containerRef.current?.addEventListener('click', handleMouseClick);\n    return () => {\n      containerRef.current?.removeEventListener('click', handleMouseClick);\n    };\n  }, [solvedQuizzes]);\n\n  // „Éá„Éº„ÇøÂèéÈõÜÈñãÂßã\n  useEffect(() => {\n    if (!isInitialized || !sessionId) return;\n\n    dataCollectorRef.current = new DataCollector(sessionId);\n    dataCollectorRef.current.start();\n\n    return () => {\n      if (dataCollectorRef.current) {\n        dataCollectorRef.current.stop();\n      }\n    };\n  }, [isInitialized, sessionId]);\n\n  const handleQuizClose = async (quizId, isCorrect) => {\n    setSolvedQuizzes(prev => new Set(prev).add(quizId));\n    setActiveQuizId(null);\n\n    // „Åô„Åπ„Å¶„ÅÆ„ÇØ„Ç§„Ç∫„ÇíËß£„ÅÑ„Åü„ÅãÁ¢∫Ë™ç\n    if (solvedQuizzes.size === quizzes.length - 1) {\n      onGameEnd({ reason: 'completed' });\n    }\n  };\n\n  return (\n    <div className=\"game-scene\">\n      <div ref={containerRef} className=\"three-container\"></div>\n\n      {/* UI „Ç™„Éº„Éê„Éº„É¨„Ç§ */}\n      <div className=\"game-ui\">\n        {/* „Çø„Ç§„Éû„Éº */}\n        <div className={`timer ${remainingTime < 60 ? 'warning' : ''}`}>\n          <span className=\"label\">Âà∂ÈôêÊôÇÈñì:</span>\n          <span className=\"time\">{formattedTime}</span>\n        </div>\n\n        {/* ÈÄ≤Êçó */}\n        <div className=\"progress\">\n          <span className=\"label\">Ëß£„ÅÑ„ÅüÂïèÈ°å:</span>\n          <span className=\"count\">{solvedQuizzes.size} / {quizzes.length}</span>\n        </div>\n\n        {/* „ÇØ„Ç§„Ç∫„Éù„ÉÉ„Éó„Ç¢„ÉÉ„Éó */}\n        {activeQuizId && (\n          <QuizBooth\n            quiz={quizzes.find(q => q.id === activeQuizId)}\n            difficulty={difficulty}\n            onClose={handleQuizClose}\n            dataCollector={dataCollectorRef.current}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default GameScene;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}