{"ast":null,"code":"var _jsxFileName = \"/Users/kubotasumire/Univ./\\u5352\\u8AD6/s-2/fatigue-detection-web-spp/frontend/src/components/GameScene.jsx\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useBabylonScene, createQuizBooth } from '../hooks/useBabylonScene';\nimport { useGameTimer } from '../hooks/useGameTimer';\nimport DataCollector from '../utils/dataCollector';\nimport QuizBooth from './QuizBooth';\nimport './GameScene.css';\nimport * as BABYLON from '@babylonjs/core';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GameScene = ({\n  difficulty,\n  sessionId,\n  onGameEnd,\n  onTimeUp\n}) => {\n  const containerRef = useRef(null);\n  const {\n    scene,\n    engine,\n    camera,\n    isInitialized\n  } = useBabylonScene(containerRef);\n  const {\n    formattedTime,\n    remainingTime\n  } = useGameTimer(difficulty, onTimeUp);\n  const dataCollectorRef = useRef(null);\n  const quizBoothsRef = useRef([]);\n  const activeQuizRef = useRef(null);\n  const [quizzes, setQuizzes] = useState([]);\n  const [solvedQuizzes, setSolvedQuizzes] = useState(new Set());\n  const [activeQuizId, setActiveQuizId] = useState(null);\n\n  // Babylon.js „Ç∑„Éº„É≥„ÅÆÁä∂ÊÖãÁ¢∫Ë™ç\n  useEffect(() => {\n    console.log('üîç GameScene state check:', {\n      isInitialized,\n      hasScene: !!scene,\n      hasCamera: !!camera,\n      hasEngine: !!engine,\n      containerRef: !!containerRef.current\n    });\n  }, [isInitialized, scene, camera, engine]);\n\n  // „ÇØ„Ç§„Ç∫„Éá„Éº„ÇøÂèñÂæó\n  useEffect(() => {\n    const fetchQuizzes = async () => {\n      try {\n        var _data$quizzes;\n        const response = await fetch(`http://localhost:5001/api/quiz/difficulty/${difficulty}`);\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n        console.log(`Loaded ${((_data$quizzes = data.quizzes) === null || _data$quizzes === void 0 ? void 0 : _data$quizzes.length) || 0} quizzes for difficulty: ${difficulty}`);\n        setQuizzes(data.quizzes || []);\n      } catch (error) {\n        console.error('Failed to fetch quizzes:', error);\n        setQuizzes([]);\n      }\n    };\n    if (difficulty) {\n      fetchQuizzes();\n    }\n  }, [difficulty]);\n\n  // 3DÁ©∫Èñì„Å´„ÇØ„Ç§„Ç∫„Éñ„Éº„Çπ„ÇíÈÖçÁΩÆ\n  useEffect(() => {\n    if (!isInitialized || !scene || quizzes.length === 0) {\n      console.log('‚è≠Ô∏è Booth creation skipped:', {\n        isInitialized,\n        hasScene: !!scene,\n        quizCount: quizzes.length\n      });\n      return;\n    }\n    console.log(`üèóÔ∏è Creating ${quizzes.length} quiz booths with scene:`, scene);\n    console.log('üìã Scene.meshes before:', scene.meshes.length);\n\n    // Êó¢Â≠ò„ÅÆ„Éñ„Éº„Çπ„ÇíÂâäÈô§\n    quizBoothsRef.current.forEach(booth => {\n      booth.dispose();\n    });\n    quizBoothsRef.current = [];\n\n    // „ÇØ„Ç§„Ç∫„ÅÆÊï∞„Å´Âøú„Åò„Å¶ÂÜÜÂΩ¢„Å´ÈÖçÁΩÆ\n    const radius = 10;\n    quizzes.forEach((quiz, index) => {\n      const angle = index / quizzes.length * Math.PI * 2;\n      const x = Math.cos(angle) * radius;\n      const z = Math.sin(angle) * radius;\n      const position = new BABYLON.Vector3(x, 1, z);\n      console.log(`  üìç Booth ${quiz.id}: pos(${x.toFixed(2)}, 1, ${z.toFixed(2)})`);\n      const booth = createQuizBooth(scene, position, quiz.id);\n      quizBoothsRef.current.push(booth);\n    });\n    console.log(`‚úÖ Created ${quizBoothsRef.current.length} booths`);\n    console.log('üìã Scene.meshes after:', scene.meshes.length);\n  }, [isInitialized, scene, quizzes]);\n\n  // „Éû„Ç¶„Çπ„ÇØ„É™„ÉÉ„ÇØ„Åß„ÇØ„Ç§„Ç∫„Çí„Ç¢„ÇØ„ÉÜ„Ç£„Éô„Éº„ÉàÔºàBabylon.jsÁâàÔºâ\n  useEffect(() => {\n    var _containerRef$current;\n    if (!engine || !scene || quizBoothsRef.current.length === 0) return;\n    const handleMouseClick = event => {\n      // „Çπ„ÇØ„É™„Éº„É≥Â∫ßÊ®ô„ÇíÂèñÂæó\n      const pickResult = scene.pick(event.clientX, event.clientY, null, false, camera);\n      console.log(`Click detected - Hit: ${!!(pickResult !== null && pickResult !== void 0 && pickResult.hit)}`);\n      if (pickResult !== null && pickResult !== void 0 && pickResult.hit) {\n        // „ÇØ„É™„ÉÉ„ÇØ„Åó„Åü„É°„ÉÉ„Ç∑„É•„ÇíÂèñÂæó\n        const hitMesh = pickResult.pickedMesh;\n        console.log(`Hit mesh:`, hitMesh === null || hitMesh === void 0 ? void 0 : hitMesh.name);\n\n        // „É°„ÉÉ„Ç∑„É•„ÅÆË¶™„ÇíËæø„Å£„Å¶quizId„ÇíÊé¢„Åô\n        let quizId = null;\n        let current = hitMesh;\n        while (current) {\n          var _current$metadata;\n          if ((_current$metadata = current.metadata) !== null && _current$metadata !== void 0 && _current$metadata.quizId) {\n            quizId = current.metadata.quizId;\n            break;\n          }\n          current = current.parent;\n        }\n        console.log(`Quiz ID found: ${quizId}`);\n        if (quizId && !solvedQuizzes.has(quizId)) {\n          console.log(`Activating quiz: ${quizId}`);\n          setActiveQuizId(quizId);\n          activeQuizRef.current = quizId;\n        }\n      }\n    };\n    (_containerRef$current = containerRef.current) === null || _containerRef$current === void 0 ? void 0 : _containerRef$current.addEventListener('click', handleMouseClick);\n    return () => {\n      var _containerRef$current2;\n      (_containerRef$current2 = containerRef.current) === null || _containerRef$current2 === void 0 ? void 0 : _containerRef$current2.removeEventListener('click', handleMouseClick);\n    };\n  }, [engine, scene, solvedQuizzes]);\n\n  // „Éá„Éº„ÇøÂèéÈõÜÈñãÂßã\n  useEffect(() => {\n    if (!isInitialized || !sessionId) return;\n    dataCollectorRef.current = new DataCollector(sessionId);\n    dataCollectorRef.current.start();\n    return () => {\n      if (dataCollectorRef.current) {\n        dataCollectorRef.current.stop();\n      }\n    };\n  }, [isInitialized, sessionId]);\n  const handleQuizClose = async (quizId, isCorrect) => {\n    // Ëß£„ÅÑ„Åü„ÇØ„Ç§„Ç∫„Çí„Éû„Éº„ÇØ\n    setSolvedQuizzes(prev => new Set(prev).add(quizId));\n    setActiveQuizId(null);\n\n    // „Éñ„Éº„Çπ„ÇíÊ∂à„ÅôÔºàBabylon.jsÁâàÔºâ\n    const boothToRemove = quizBoothsRef.current.find(b => {\n      var _b$metadata;\n      return ((_b$metadata = b.metadata) === null || _b$metadata === void 0 ? void 0 : _b$metadata.quizId) === quizId;\n    });\n    if (boothToRemove && scene) {\n      boothToRemove.dispose();\n      quizBoothsRef.current = quizBoothsRef.current.filter(b => {\n        var _b$metadata2;\n        return ((_b$metadata2 = b.metadata) === null || _b$metadata2 === void 0 ? void 0 : _b$metadata2.quizId) !== quizId;\n      });\n    }\n\n    // „Åô„Åπ„Å¶„ÅÆ„ÇØ„Ç§„Ç∫„ÇíËß£„ÅÑ„Åü„ÅãÁ¢∫Ë™ç\n    if (solvedQuizzes.size === quizzes.length - 1) {\n      onGameEnd({\n        reason: 'completed'\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"game-scene\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef,\n      className: \"three-container\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-ui\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `timer ${remainingTime < 60 ? 'warning' : ''}`,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"label\",\n          children: \"\\u5236\\u9650\\u6642\\u9593:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"time\",\n          children: formattedTime\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"progress\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"label\",\n          children: \"\\u89E3\\u3044\\u305F\\u554F\\u984C:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"count\",\n          children: [solvedQuizzes.size, \" / \", quizzes.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this), activeQuizId && /*#__PURE__*/_jsxDEV(QuizBooth, {\n        quiz: quizzes.find(q => q.id === activeQuizId),\n        difficulty: difficulty,\n        onClose: handleQuizClose,\n        dataCollector: dataCollectorRef.current\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 170,\n    columnNumber: 5\n  }, this);\n};\nexport default GameScene;","map":{"version":3,"names":["React","useEffect","useRef","useState","useBabylonScene","createQuizBooth","useGameTimer","DataCollector","QuizBooth","BABYLON","jsxDEV","_jsxDEV","GameScene","difficulty","sessionId","onGameEnd","onTimeUp","containerRef","scene","engine","camera","isInitialized","formattedTime","remainingTime","dataCollectorRef","quizBoothsRef","activeQuizRef","quizzes","setQuizzes","solvedQuizzes","setSolvedQuizzes","Set","activeQuizId","setActiveQuizId","console","log","hasScene","hasCamera","hasEngine","current","fetchQuizzes","_data$quizzes","response","fetch","ok","Error","status","data","json","length","error","quizCount","meshes","forEach","booth","dispose","radius","quiz","index","angle","Math","PI","x","cos","z","sin","position","Vector3","id","toFixed","push","_containerRef$current","handleMouseClick","event","pickResult","pick","clientX","clientY","hit","hitMesh","pickedMesh","name","quizId","_current$metadata","metadata","parent","has","addEventListener","_containerRef$current2","removeEventListener","start","stop","handleQuizClose","isCorrect","prev","add","boothToRemove","find","b","_b$metadata","filter","_b$metadata2","size","reason","className","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","q","onClose","dataCollector"],"sources":["/Users/kubotasumire/Univ./ÂçíË´ñ/s-2/fatigue-detection-web-spp/frontend/src/components/GameScene.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { useBabylonScene, createQuizBooth } from '../hooks/useBabylonScene';\nimport { useGameTimer } from '../hooks/useGameTimer';\nimport DataCollector from '../utils/dataCollector';\nimport QuizBooth from './QuizBooth';\nimport './GameScene.css';\nimport * as BABYLON from '@babylonjs/core';\n\nconst GameScene = ({ difficulty, sessionId, onGameEnd, onTimeUp }) => {\n  const containerRef = useRef(null);\n  const { scene, engine, camera, isInitialized } = useBabylonScene(containerRef);\n  const { formattedTime, remainingTime } = useGameTimer(difficulty, onTimeUp);\n  const dataCollectorRef = useRef(null);\n  const quizBoothsRef = useRef([]);\n  const activeQuizRef = useRef(null);\n\n  const [quizzes, setQuizzes] = useState([]);\n  const [solvedQuizzes, setSolvedQuizzes] = useState(new Set());\n  const [activeQuizId, setActiveQuizId] = useState(null);\n\n  // Babylon.js „Ç∑„Éº„É≥„ÅÆÁä∂ÊÖãÁ¢∫Ë™ç\n  useEffect(() => {\n    console.log('üîç GameScene state check:', {\n      isInitialized,\n      hasScene: !!scene,\n      hasCamera: !!camera,\n      hasEngine: !!engine,\n      containerRef: !!containerRef.current\n    });\n  }, [isInitialized, scene, camera, engine]);\n\n  // „ÇØ„Ç§„Ç∫„Éá„Éº„ÇøÂèñÂæó\n  useEffect(() => {\n    const fetchQuizzes = async () => {\n      try {\n        const response = await fetch(`http://localhost:5001/api/quiz/difficulty/${difficulty}`);\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n        console.log(`Loaded ${data.quizzes?.length || 0} quizzes for difficulty: ${difficulty}`);\n        setQuizzes(data.quizzes || []);\n      } catch (error) {\n        console.error('Failed to fetch quizzes:', error);\n        setQuizzes([]);\n      }\n    };\n\n    if (difficulty) {\n      fetchQuizzes();\n    }\n  }, [difficulty]);\n\n  // 3DÁ©∫Èñì„Å´„ÇØ„Ç§„Ç∫„Éñ„Éº„Çπ„ÇíÈÖçÁΩÆ\n  useEffect(() => {\n    if (!isInitialized || !scene || quizzes.length === 0) {\n      console.log('‚è≠Ô∏è Booth creation skipped:', { isInitialized, hasScene: !!scene, quizCount: quizzes.length });\n      return;\n    }\n\n    console.log(`üèóÔ∏è Creating ${quizzes.length} quiz booths with scene:`, scene);\n    console.log('üìã Scene.meshes before:', scene.meshes.length);\n\n    // Êó¢Â≠ò„ÅÆ„Éñ„Éº„Çπ„ÇíÂâäÈô§\n    quizBoothsRef.current.forEach(booth => {\n      booth.dispose();\n    });\n    quizBoothsRef.current = [];\n\n    // „ÇØ„Ç§„Ç∫„ÅÆÊï∞„Å´Âøú„Åò„Å¶ÂÜÜÂΩ¢„Å´ÈÖçÁΩÆ\n    const radius = 10;\n    quizzes.forEach((quiz, index) => {\n      const angle = (index / quizzes.length) * Math.PI * 2;\n      const x = Math.cos(angle) * radius;\n      const z = Math.sin(angle) * radius;\n\n      const position = new BABYLON.Vector3(x, 1, z);\n      console.log(`  üìç Booth ${quiz.id}: pos(${x.toFixed(2)}, 1, ${z.toFixed(2)})`);\n\n      const booth = createQuizBooth(scene, position, quiz.id);\n      quizBoothsRef.current.push(booth);\n    });\n\n    console.log(`‚úÖ Created ${quizBoothsRef.current.length} booths`);\n    console.log('üìã Scene.meshes after:', scene.meshes.length);\n  }, [isInitialized, scene, quizzes]);\n\n  // „Éû„Ç¶„Çπ„ÇØ„É™„ÉÉ„ÇØ„Åß„ÇØ„Ç§„Ç∫„Çí„Ç¢„ÇØ„ÉÜ„Ç£„Éô„Éº„ÉàÔºàBabylon.jsÁâàÔºâ\n  useEffect(() => {\n    if (!engine || !scene || quizBoothsRef.current.length === 0) return;\n\n    const handleMouseClick = (event) => {\n      // „Çπ„ÇØ„É™„Éº„É≥Â∫ßÊ®ô„ÇíÂèñÂæó\n      const pickResult = scene.pick(\n        event.clientX,\n        event.clientY,\n        null,\n        false,\n        camera\n      );\n\n      console.log(`Click detected - Hit: ${!!pickResult?.hit}`);\n\n      if (pickResult?.hit) {\n        // „ÇØ„É™„ÉÉ„ÇØ„Åó„Åü„É°„ÉÉ„Ç∑„É•„ÇíÂèñÂæó\n        const hitMesh = pickResult.pickedMesh;\n        console.log(`Hit mesh:`, hitMesh?.name);\n\n        // „É°„ÉÉ„Ç∑„É•„ÅÆË¶™„ÇíËæø„Å£„Å¶quizId„ÇíÊé¢„Åô\n        let quizId = null;\n        let current = hitMesh;\n\n        while (current) {\n          if (current.metadata?.quizId) {\n            quizId = current.metadata.quizId;\n            break;\n          }\n          current = current.parent;\n        }\n\n        console.log(`Quiz ID found: ${quizId}`);\n\n        if (quizId && !solvedQuizzes.has(quizId)) {\n          console.log(`Activating quiz: ${quizId}`);\n          setActiveQuizId(quizId);\n          activeQuizRef.current = quizId;\n        }\n      }\n    };\n\n    containerRef.current?.addEventListener('click', handleMouseClick);\n    return () => {\n      containerRef.current?.removeEventListener('click', handleMouseClick);\n    };\n  }, [engine, scene, solvedQuizzes]);\n\n  // „Éá„Éº„ÇøÂèéÈõÜÈñãÂßã\n  useEffect(() => {\n    if (!isInitialized || !sessionId) return;\n\n    dataCollectorRef.current = new DataCollector(sessionId);\n    dataCollectorRef.current.start();\n\n    return () => {\n      if (dataCollectorRef.current) {\n        dataCollectorRef.current.stop();\n      }\n    };\n  }, [isInitialized, sessionId]);\n\n  const handleQuizClose = async (quizId, isCorrect) => {\n    // Ëß£„ÅÑ„Åü„ÇØ„Ç§„Ç∫„Çí„Éû„Éº„ÇØ\n    setSolvedQuizzes(prev => new Set(prev).add(quizId));\n    setActiveQuizId(null);\n\n    // „Éñ„Éº„Çπ„ÇíÊ∂à„ÅôÔºàBabylon.jsÁâàÔºâ\n    const boothToRemove = quizBoothsRef.current.find(b => b.metadata?.quizId === quizId);\n    if (boothToRemove && scene) {\n      boothToRemove.dispose();\n      quizBoothsRef.current = quizBoothsRef.current.filter(b => b.metadata?.quizId !== quizId);\n    }\n\n    // „Åô„Åπ„Å¶„ÅÆ„ÇØ„Ç§„Ç∫„ÇíËß£„ÅÑ„Åü„ÅãÁ¢∫Ë™ç\n    if (solvedQuizzes.size === quizzes.length - 1) {\n      onGameEnd({ reason: 'completed' });\n    }\n  };\n\n  return (\n    <div className=\"game-scene\">\n      <div ref={containerRef} className=\"three-container\"></div>\n\n      {/* UI „Ç™„Éº„Éê„Éº„É¨„Ç§ */}\n      <div className=\"game-ui\">\n        {/* „Çø„Ç§„Éû„Éº */}\n        <div className={`timer ${remainingTime < 60 ? 'warning' : ''}`}>\n          <span className=\"label\">Âà∂ÈôêÊôÇÈñì:</span>\n          <span className=\"time\">{formattedTime}</span>\n        </div>\n\n        {/* ÈÄ≤Êçó */}\n        <div className=\"progress\">\n          <span className=\"label\">Ëß£„ÅÑ„ÅüÂïèÈ°å:</span>\n          <span className=\"count\">{solvedQuizzes.size} / {quizzes.length}</span>\n        </div>\n\n        {/* „ÇØ„Ç§„Ç∫„Éù„ÉÉ„Éó„Ç¢„ÉÉ„Éó */}\n        {activeQuizId && (\n          <QuizBooth\n            quiz={quizzes.find(q => q.id === activeQuizId)}\n            difficulty={difficulty}\n            onClose={handleQuizClose}\n            dataCollector={dataCollectorRef.current}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default GameScene;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}