{"ast":null,"code":"import { DeviceType } from \"./InputDevices/deviceEnums.js\";\nimport { NativeDeviceInputSystem } from \"./nativeDeviceInputSystem.js\";\nimport { WebDeviceInputSystem } from \"./webDeviceInputSystem.js\";\nimport { DeviceSource } from \"./InputDevices/deviceSource.js\";\n/** @internal */\nexport class InternalDeviceSourceManager {\n  constructor(engine) {\n    this._registeredManagers = new Array();\n    this._refCount = 0;\n    // Public Functions\n    this.registerManager = manager => {\n      for (let deviceType = 0; deviceType < this._devices.length; deviceType++) {\n        const device = this._devices[deviceType];\n        for (const deviceSlotKey in device) {\n          const deviceSlot = +deviceSlotKey;\n          manager._addDevice(new DeviceSource(this._deviceInputSystem, deviceType, deviceSlot));\n        }\n      }\n      this._registeredManagers.push(manager);\n    };\n    this.unregisterManager = manager => {\n      const idx = this._registeredManagers.indexOf(manager);\n      if (idx > -1) {\n        this._registeredManagers.splice(idx, 1);\n      }\n    };\n    const numberOfDeviceTypes = Object.keys(DeviceType).length / 2;\n    this._devices = new Array(numberOfDeviceTypes);\n    const onDeviceConnected = (deviceType, deviceSlot) => {\n      if (!this._devices[deviceType]) {\n        this._devices[deviceType] = new Array();\n      }\n      if (!this._devices[deviceType][deviceSlot]) {\n        this._devices[deviceType][deviceSlot] = deviceSlot;\n      }\n      for (const manager of this._registeredManagers) {\n        const deviceSource = new DeviceSource(this._deviceInputSystem, deviceType, deviceSlot);\n        manager._addDevice(deviceSource);\n      }\n    };\n    const onDeviceDisconnected = (deviceType, deviceSlot) => {\n      if (this._devices[deviceType]?.[deviceSlot]) {\n        delete this._devices[deviceType][deviceSlot];\n      }\n      for (const manager of this._registeredManagers) {\n        manager._removeDevice(deviceType, deviceSlot);\n      }\n    };\n    const onInputChanged = (deviceType, deviceSlot, eventData) => {\n      if (eventData) {\n        for (const manager of this._registeredManagers) {\n          manager._onInputChanged(deviceType, deviceSlot, eventData);\n        }\n      }\n    };\n    if (typeof _native !== \"undefined\") {\n      this._deviceInputSystem = new NativeDeviceInputSystem(onDeviceConnected, onDeviceDisconnected, onInputChanged);\n    } else {\n      this._deviceInputSystem = new WebDeviceInputSystem(engine, onDeviceConnected, onDeviceDisconnected, onInputChanged);\n    }\n  }\n  dispose() {\n    this._deviceInputSystem.dispose();\n  }\n}\n//# sourceMappingURL=internalDeviceSourceManager.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}