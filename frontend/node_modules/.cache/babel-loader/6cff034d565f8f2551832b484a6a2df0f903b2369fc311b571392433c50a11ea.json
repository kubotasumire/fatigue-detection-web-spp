{"ast":null,"code":"import { __decorate } from \"../../../tslib.es6.js\";\nimport { RegisterClass } from \"../../../Misc/typeStore.js\";\nimport { NodeGeometryBlockConnectionPointTypes } from \"../Enums/nodeGeometryConnectionPointTypes.js\";\nimport { NodeGeometryBlock } from \"../nodeGeometryBlock.js\";\nimport { Vector2, Vector3, Vector4 } from \"../../../Maths/math.vector.js\";\nimport { PropertyTypeForEdition, editableInPropertyPage } from \"../../../Decorators/nodeDecorator.js\";\n/**\n * Operations supported by the Trigonometry block\n */\nexport var GeometryTrigonometryBlockOperations;\n(function (GeometryTrigonometryBlockOperations) {\n  /** Cos */\n  GeometryTrigonometryBlockOperations[GeometryTrigonometryBlockOperations[\"Cos\"] = 0] = \"Cos\";\n  /** Sin */\n  GeometryTrigonometryBlockOperations[GeometryTrigonometryBlockOperations[\"Sin\"] = 1] = \"Sin\";\n  /** Abs */\n  GeometryTrigonometryBlockOperations[GeometryTrigonometryBlockOperations[\"Abs\"] = 2] = \"Abs\";\n  /** Exp */\n  GeometryTrigonometryBlockOperations[GeometryTrigonometryBlockOperations[\"Exp\"] = 3] = \"Exp\";\n  /** Round */\n  GeometryTrigonometryBlockOperations[GeometryTrigonometryBlockOperations[\"Round\"] = 4] = \"Round\";\n  /** Floor */\n  GeometryTrigonometryBlockOperations[GeometryTrigonometryBlockOperations[\"Floor\"] = 5] = \"Floor\";\n  /** Ceiling */\n  GeometryTrigonometryBlockOperations[GeometryTrigonometryBlockOperations[\"Ceiling\"] = 6] = \"Ceiling\";\n  /** Square root */\n  GeometryTrigonometryBlockOperations[GeometryTrigonometryBlockOperations[\"Sqrt\"] = 7] = \"Sqrt\";\n  /** Log */\n  GeometryTrigonometryBlockOperations[GeometryTrigonometryBlockOperations[\"Log\"] = 8] = \"Log\";\n  /** Tangent */\n  GeometryTrigonometryBlockOperations[GeometryTrigonometryBlockOperations[\"Tan\"] = 9] = \"Tan\";\n  /** Arc tangent */\n  GeometryTrigonometryBlockOperations[GeometryTrigonometryBlockOperations[\"ArcTan\"] = 10] = \"ArcTan\";\n  /** Arc cosinus */\n  GeometryTrigonometryBlockOperations[GeometryTrigonometryBlockOperations[\"ArcCos\"] = 11] = \"ArcCos\";\n  /** Arc sinus */\n  GeometryTrigonometryBlockOperations[GeometryTrigonometryBlockOperations[\"ArcSin\"] = 12] = \"ArcSin\";\n  /** Sign */\n  GeometryTrigonometryBlockOperations[GeometryTrigonometryBlockOperations[\"Sign\"] = 13] = \"Sign\";\n  /** Negate */\n  GeometryTrigonometryBlockOperations[GeometryTrigonometryBlockOperations[\"Negate\"] = 14] = \"Negate\";\n  /** OneMinus */\n  GeometryTrigonometryBlockOperations[GeometryTrigonometryBlockOperations[\"OneMinus\"] = 15] = \"OneMinus\";\n  /** Reciprocal */\n  GeometryTrigonometryBlockOperations[GeometryTrigonometryBlockOperations[\"Reciprocal\"] = 16] = \"Reciprocal\";\n  /** ToDegrees */\n  GeometryTrigonometryBlockOperations[GeometryTrigonometryBlockOperations[\"ToDegrees\"] = 17] = \"ToDegrees\";\n  /** ToRadians */\n  GeometryTrigonometryBlockOperations[GeometryTrigonometryBlockOperations[\"ToRadians\"] = 18] = \"ToRadians\";\n  /** Fract */\n  GeometryTrigonometryBlockOperations[GeometryTrigonometryBlockOperations[\"Fract\"] = 19] = \"Fract\";\n  /** Exp2 */\n  GeometryTrigonometryBlockOperations[GeometryTrigonometryBlockOperations[\"Exp2\"] = 20] = \"Exp2\";\n})(GeometryTrigonometryBlockOperations || (GeometryTrigonometryBlockOperations = {}));\n/**\n * Block used to apply trigonometry operation to floats\n */\nexport class GeometryTrigonometryBlock extends NodeGeometryBlock {\n  /**\n   * Creates a new GeometryTrigonometryBlock\n   * @param name defines the block name\n   */\n  constructor(name) {\n    super(name);\n    /**\n     * Gets or sets the operation applied by the block\n     */\n    this.operation = GeometryTrigonometryBlockOperations.Cos;\n    this.registerInput(\"input\", NodeGeometryBlockConnectionPointTypes.AutoDetect);\n    this.registerOutput(\"output\", NodeGeometryBlockConnectionPointTypes.BasedOnInput);\n    this._outputs[0]._typeConnectionSource = this._inputs[0];\n    this._inputs[0].excludedConnectionPointTypes.push(NodeGeometryBlockConnectionPointTypes.Matrix);\n    this._inputs[0].excludedConnectionPointTypes.push(NodeGeometryBlockConnectionPointTypes.Geometry);\n    this._inputs[0].excludedConnectionPointTypes.push(NodeGeometryBlockConnectionPointTypes.Texture);\n  }\n  /**\n   * Gets the current class name\n   * @returns the class name\n   */\n  getClassName() {\n    return \"GeometryTrigonometryBlock\";\n  }\n  /**\n   * Gets the input component\n   */\n  get input() {\n    return this._inputs[0];\n  }\n  /**\n   * Gets the output component\n   */\n  get output() {\n    return this._outputs[0];\n  }\n  _buildBlock(state) {\n    super._buildBlock(state);\n    let func = null;\n    switch (this.operation) {\n      case GeometryTrigonometryBlockOperations.Cos:\n        {\n          func = value => Math.cos(value);\n          break;\n        }\n      case GeometryTrigonometryBlockOperations.Sin:\n        {\n          func = value => Math.sin(value);\n          break;\n        }\n      case GeometryTrigonometryBlockOperations.Abs:\n        {\n          func = value => Math.abs(value);\n          break;\n        }\n      case GeometryTrigonometryBlockOperations.Exp:\n        {\n          func = value => Math.exp(value);\n          break;\n        }\n      case GeometryTrigonometryBlockOperations.Exp2:\n        {\n          func = value => Math.pow(2, value);\n          break;\n        }\n      case GeometryTrigonometryBlockOperations.Round:\n        {\n          func = value => Math.round(value);\n          break;\n        }\n      case GeometryTrigonometryBlockOperations.Floor:\n        {\n          func = value => Math.floor(value);\n          break;\n        }\n      case GeometryTrigonometryBlockOperations.Ceiling:\n        {\n          func = value => Math.ceil(value);\n          break;\n        }\n      case GeometryTrigonometryBlockOperations.Sqrt:\n        {\n          func = value => Math.sqrt(value);\n          break;\n        }\n      case GeometryTrigonometryBlockOperations.Log:\n        {\n          func = value => Math.log(value);\n          break;\n        }\n      case GeometryTrigonometryBlockOperations.Tan:\n        {\n          func = value => Math.tan(value);\n          break;\n        }\n      case GeometryTrigonometryBlockOperations.ArcTan:\n        {\n          func = value => Math.atan(value);\n          break;\n        }\n      case GeometryTrigonometryBlockOperations.ArcCos:\n        {\n          func = value => Math.acos(value);\n          break;\n        }\n      case GeometryTrigonometryBlockOperations.ArcSin:\n        {\n          func = value => Math.asin(value);\n          break;\n        }\n      case GeometryTrigonometryBlockOperations.Sign:\n        {\n          func = value => Math.sign(value);\n          break;\n        }\n      case GeometryTrigonometryBlockOperations.Negate:\n        {\n          func = value => -value;\n          break;\n        }\n      case GeometryTrigonometryBlockOperations.OneMinus:\n        {\n          func = value => 1 - value;\n          break;\n        }\n      case GeometryTrigonometryBlockOperations.Reciprocal:\n        {\n          func = value => 1 / value;\n          break;\n        }\n      case GeometryTrigonometryBlockOperations.ToRadians:\n        {\n          func = value => value * Math.PI / 180;\n          break;\n        }\n      case GeometryTrigonometryBlockOperations.ToDegrees:\n        {\n          func = value => value * 180 / Math.PI;\n          break;\n        }\n      case GeometryTrigonometryBlockOperations.Fract:\n        {\n          func = value => {\n            if (value >= 0) {\n              return value - Math.floor(value);\n            } else {\n              return value - Math.ceil(value);\n            }\n          };\n          break;\n        }\n    }\n    if (!func) {\n      this.output._storedFunction = null;\n      this.output._storedValue = null;\n      return;\n    }\n    switch (this.input.type) {\n      case NodeGeometryBlockConnectionPointTypes.Int:\n      case NodeGeometryBlockConnectionPointTypes.Float:\n        {\n          this.output._storedFunction = state => {\n            const source = this.input.getConnectedValue(state);\n            return func(source);\n          };\n          break;\n        }\n      case NodeGeometryBlockConnectionPointTypes.Vector2:\n        {\n          this.output._storedFunction = state => {\n            const source = this.input.getConnectedValue(state);\n            return new Vector2(func(source.x), func(source.y));\n          };\n          break;\n        }\n      case NodeGeometryBlockConnectionPointTypes.Vector3:\n        {\n          this.output._storedFunction = state => {\n            const source = this.input.getConnectedValue(state);\n            return new Vector3(func(source.x), func(source.y), func(source.z));\n          };\n          break;\n        }\n      case NodeGeometryBlockConnectionPointTypes.Vector4:\n        {\n          this.output._storedFunction = state => {\n            const source = this.input.getConnectedValue(state);\n            return new Vector4(func(source.x), func(source.y), func(source.z), func(source.w));\n          };\n          break;\n        }\n    }\n    return this;\n  }\n  serialize() {\n    const serializationObject = super.serialize();\n    serializationObject.operation = this.operation;\n    return serializationObject;\n  }\n  _deserialize(serializationObject) {\n    super._deserialize(serializationObject);\n    this.operation = serializationObject.operation;\n  }\n  _dumpPropertiesCode() {\n    const codeString = super._dumpPropertiesCode() + `${this._codeVariableName}.operation = BABYLON.GeometryTrigonometryBlockOperations.${GeometryTrigonometryBlockOperations[this.operation]};\\n`;\n    return codeString;\n  }\n}\n__decorate([editableInPropertyPage(\"Operation\", PropertyTypeForEdition.List, \"ADVANCED\", {\n  notifiers: {\n    rebuild: true\n  },\n  options: [{\n    label: \"Cos\",\n    value: GeometryTrigonometryBlockOperations.Cos\n  }, {\n    label: \"Sin\",\n    value: GeometryTrigonometryBlockOperations.Sin\n  }, {\n    label: \"Abs\",\n    value: GeometryTrigonometryBlockOperations.Abs\n  }, {\n    label: \"Exp\",\n    value: GeometryTrigonometryBlockOperations.Exp\n  }, {\n    label: \"Exp2\",\n    value: GeometryTrigonometryBlockOperations.Exp2\n  }, {\n    label: \"Round\",\n    value: GeometryTrigonometryBlockOperations.Round\n  }, {\n    label: \"Floor\",\n    value: GeometryTrigonometryBlockOperations.Floor\n  }, {\n    label: \"Ceiling\",\n    value: GeometryTrigonometryBlockOperations.Ceiling\n  }, {\n    label: \"Sqrt\",\n    value: GeometryTrigonometryBlockOperations.Sqrt\n  }, {\n    label: \"Log\",\n    value: GeometryTrigonometryBlockOperations.Log\n  }, {\n    label: \"Tan\",\n    value: GeometryTrigonometryBlockOperations.Tan\n  }, {\n    label: \"ArcTan\",\n    value: GeometryTrigonometryBlockOperations.ArcTan\n  }, {\n    label: \"ArcCos\",\n    value: GeometryTrigonometryBlockOperations.ArcCos\n  }, {\n    label: \"ArcSin\",\n    value: GeometryTrigonometryBlockOperations.ArcSin\n  }, {\n    label: \"Sign\",\n    value: GeometryTrigonometryBlockOperations.Sign\n  }, {\n    label: \"Negate\",\n    value: GeometryTrigonometryBlockOperations.Negate\n  }, {\n    label: \"OneMinus\",\n    value: GeometryTrigonometryBlockOperations.OneMinus\n  }, {\n    label: \"Reciprocal\",\n    value: GeometryTrigonometryBlockOperations.Reciprocal\n  }, {\n    label: \"ToDegrees\",\n    value: GeometryTrigonometryBlockOperations.ToDegrees\n  }, {\n    label: \"ToRadians\",\n    value: GeometryTrigonometryBlockOperations.ToRadians\n  }, {\n    label: \"Fract\",\n    value: GeometryTrigonometryBlockOperations.Fract\n  }]\n})], GeometryTrigonometryBlock.prototype, \"operation\", void 0);\nRegisterClass(\"BABYLON.GeometryTrigonometryBlock\", GeometryTrigonometryBlock);\n//# sourceMappingURL=geometryTrigonometryBlock.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}