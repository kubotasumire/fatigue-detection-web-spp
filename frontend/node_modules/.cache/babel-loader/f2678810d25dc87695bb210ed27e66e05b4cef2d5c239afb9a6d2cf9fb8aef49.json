{"ast":null,"code":"import { Observable } from \"../Misc/observable.js\";\nimport { Gamepad } from \"./gamepad.js\";\n/**\n * Defines supported buttons for DualShock compatible gamepads\n */\nexport var DualShockButton;\n(function (DualShockButton) {\n  /** Cross */\n  DualShockButton[DualShockButton[\"Cross\"] = 0] = \"Cross\";\n  /** Circle */\n  DualShockButton[DualShockButton[\"Circle\"] = 1] = \"Circle\";\n  /** Square */\n  DualShockButton[DualShockButton[\"Square\"] = 2] = \"Square\";\n  /** Triangle */\n  DualShockButton[DualShockButton[\"Triangle\"] = 3] = \"Triangle\";\n  /** L1 */\n  DualShockButton[DualShockButton[\"L1\"] = 4] = \"L1\";\n  /** R1 */\n  DualShockButton[DualShockButton[\"R1\"] = 5] = \"R1\";\n  /** Share */\n  DualShockButton[DualShockButton[\"Share\"] = 8] = \"Share\";\n  /** Options */\n  DualShockButton[DualShockButton[\"Options\"] = 9] = \"Options\";\n  /** Left stick */\n  DualShockButton[DualShockButton[\"LeftStick\"] = 10] = \"LeftStick\";\n  /** Right stick */\n  DualShockButton[DualShockButton[\"RightStick\"] = 11] = \"RightStick\";\n})(DualShockButton || (DualShockButton = {}));\n/** Defines values for DualShock DPad  */\nexport var DualShockDpad;\n(function (DualShockDpad) {\n  /** Up */\n  DualShockDpad[DualShockDpad[\"Up\"] = 12] = \"Up\";\n  /** Down */\n  DualShockDpad[DualShockDpad[\"Down\"] = 13] = \"Down\";\n  /** Left */\n  DualShockDpad[DualShockDpad[\"Left\"] = 14] = \"Left\";\n  /** Right */\n  DualShockDpad[DualShockDpad[\"Right\"] = 15] = \"Right\";\n})(DualShockDpad || (DualShockDpad = {}));\n/**\n * Defines a DualShock gamepad\n */\nexport class DualShockPad extends Gamepad {\n  /**\n   * Creates a new DualShock gamepad object\n   * @param id defines the id of this gamepad\n   * @param index defines its index\n   * @param gamepad defines the internal HTML gamepad object\n   */\n  constructor(id, index, gamepad) {\n    super(id.replace(\"STANDARD GAMEPAD\", \"SONY PLAYSTATION DUALSHOCK\"), index, gamepad, 0, 1, 2, 3);\n    this._leftTrigger = 0;\n    this._rightTrigger = 0;\n    /** Observable raised when a button is pressed */\n    this.onButtonDownObservable = new Observable();\n    /** Observable raised when a button is released */\n    this.onButtonUpObservable = new Observable();\n    /** Observable raised when a pad is pressed */\n    this.onPadDownObservable = new Observable();\n    /** Observable raised when a pad is released */\n    this.onPadUpObservable = new Observable();\n    this._buttonCross = 0;\n    this._buttonCircle = 0;\n    this._buttonSquare = 0;\n    this._buttonTriangle = 0;\n    this._buttonShare = 0;\n    this._buttonOptions = 0;\n    this._buttonL1 = 0;\n    this._buttonR1 = 0;\n    this._buttonLeftStick = 0;\n    this._buttonRightStick = 0;\n    this._dPadUp = 0;\n    this._dPadDown = 0;\n    this._dPadLeft = 0;\n    this._dPadRight = 0;\n    this.type = Gamepad.DUALSHOCK;\n  }\n  /**\n   * Defines the callback to call when left trigger is pressed\n   * @param callback defines the callback to use\n   */\n  onlefttriggerchanged(callback) {\n    this._onlefttriggerchanged = callback;\n  }\n  /**\n   * Defines the callback to call when right trigger is pressed\n   * @param callback defines the callback to use\n   */\n  onrighttriggerchanged(callback) {\n    this._onrighttriggerchanged = callback;\n  }\n  /**\n   * Gets the left trigger value\n   */\n  get leftTrigger() {\n    return this._leftTrigger;\n  }\n  /**\n   * Sets the left trigger value\n   */\n  set leftTrigger(newValue) {\n    if (this._onlefttriggerchanged && this._leftTrigger !== newValue) {\n      this._onlefttriggerchanged(newValue);\n    }\n    this._leftTrigger = newValue;\n  }\n  /**\n   * Gets the right trigger value\n   */\n  get rightTrigger() {\n    return this._rightTrigger;\n  }\n  /**\n   * Sets the right trigger value\n   */\n  set rightTrigger(newValue) {\n    if (this._onrighttriggerchanged && this._rightTrigger !== newValue) {\n      this._onrighttriggerchanged(newValue);\n    }\n    this._rightTrigger = newValue;\n  }\n  /**\n   * Defines the callback to call when a button is pressed\n   * @param callback defines the callback to use\n   */\n  onbuttondown(callback) {\n    this._onbuttondown = callback;\n  }\n  /**\n   * Defines the callback to call when a button is released\n   * @param callback defines the callback to use\n   */\n  onbuttonup(callback) {\n    this._onbuttonup = callback;\n  }\n  /**\n   * Defines the callback to call when a pad is pressed\n   * @param callback defines the callback to use\n   */\n  ondpaddown(callback) {\n    this._ondpaddown = callback;\n  }\n  /**\n   * Defines the callback to call when a pad is released\n   * @param callback defines the callback to use\n   */\n  ondpadup(callback) {\n    this._ondpadup = callback;\n  }\n  _setButtonValue(newValue, currentValue, buttonType) {\n    if (newValue !== currentValue) {\n      if (newValue === 1) {\n        if (this._onbuttondown) {\n          this._onbuttondown(buttonType);\n        }\n        this.onButtonDownObservable.notifyObservers(buttonType);\n      }\n      if (newValue === 0) {\n        if (this._onbuttonup) {\n          this._onbuttonup(buttonType);\n        }\n        this.onButtonUpObservable.notifyObservers(buttonType);\n      }\n    }\n    return newValue;\n  }\n  _setDPadValue(newValue, currentValue, buttonType) {\n    if (newValue !== currentValue) {\n      if (newValue === 1) {\n        if (this._ondpaddown) {\n          this._ondpaddown(buttonType);\n        }\n        this.onPadDownObservable.notifyObservers(buttonType);\n      }\n      if (newValue === 0) {\n        if (this._ondpadup) {\n          this._ondpadup(buttonType);\n        }\n        this.onPadUpObservable.notifyObservers(buttonType);\n      }\n    }\n    return newValue;\n  }\n  /**\n   * Gets the value of the `Cross` button\n   */\n  get buttonCross() {\n    return this._buttonCross;\n  }\n  /**\n   * Sets the value of the `Cross` button\n   */\n  set buttonCross(value) {\n    this._buttonCross = this._setButtonValue(value, this._buttonCross, DualShockButton.Cross);\n  }\n  /**\n   * Gets the value of the `Circle` button\n   */\n  get buttonCircle() {\n    return this._buttonCircle;\n  }\n  /**\n   * Sets the value of the `Circle` button\n   */\n  set buttonCircle(value) {\n    this._buttonCircle = this._setButtonValue(value, this._buttonCircle, DualShockButton.Circle);\n  }\n  /**\n   * Gets the value of the `Square` button\n   */\n  get buttonSquare() {\n    return this._buttonSquare;\n  }\n  /**\n   * Sets the value of the `Square` button\n   */\n  set buttonSquare(value) {\n    this._buttonSquare = this._setButtonValue(value, this._buttonSquare, DualShockButton.Square);\n  }\n  /**\n   * Gets the value of the `Triangle` button\n   */\n  get buttonTriangle() {\n    return this._buttonTriangle;\n  }\n  /**\n   * Sets the value of the `Triangle` button\n   */\n  set buttonTriangle(value) {\n    this._buttonTriangle = this._setButtonValue(value, this._buttonTriangle, DualShockButton.Triangle);\n  }\n  /**\n   * Gets the value of the `Options` button\n   */\n  get buttonOptions() {\n    return this._buttonOptions;\n  }\n  /**\n   * Sets the value of the `Options` button\n   */\n  set buttonOptions(value) {\n    this._buttonOptions = this._setButtonValue(value, this._buttonOptions, DualShockButton.Options);\n  }\n  /**\n   * Gets the value of the `Share` button\n   */\n  get buttonShare() {\n    return this._buttonShare;\n  }\n  /**\n   * Sets the value of the `Share` button\n   */\n  set buttonShare(value) {\n    this._buttonShare = this._setButtonValue(value, this._buttonShare, DualShockButton.Share);\n  }\n  /**\n   * Gets the value of the `L1` button\n   */\n  get buttonL1() {\n    return this._buttonL1;\n  }\n  /**\n   * Sets the value of the `L1` button\n   */\n  set buttonL1(value) {\n    this._buttonL1 = this._setButtonValue(value, this._buttonL1, DualShockButton.L1);\n  }\n  /**\n   * Gets the value of the `R1` button\n   */\n  get buttonR1() {\n    return this._buttonR1;\n  }\n  /**\n   * Sets the value of the `R1` button\n   */\n  set buttonR1(value) {\n    this._buttonR1 = this._setButtonValue(value, this._buttonR1, DualShockButton.R1);\n  }\n  /**\n   * Gets the value of the Left joystick\n   */\n  get buttonLeftStick() {\n    return this._buttonLeftStick;\n  }\n  /**\n   * Sets the value of the Left joystick\n   */\n  set buttonLeftStick(value) {\n    this._buttonLeftStick = this._setButtonValue(value, this._buttonLeftStick, DualShockButton.LeftStick);\n  }\n  /**\n   * Gets the value of the Right joystick\n   */\n  get buttonRightStick() {\n    return this._buttonRightStick;\n  }\n  /**\n   * Sets the value of the Right joystick\n   */\n  set buttonRightStick(value) {\n    this._buttonRightStick = this._setButtonValue(value, this._buttonRightStick, DualShockButton.RightStick);\n  }\n  /**\n   * Gets the value of D-pad up\n   */\n  get dPadUp() {\n    return this._dPadUp;\n  }\n  /**\n   * Sets the value of D-pad up\n   */\n  set dPadUp(value) {\n    this._dPadUp = this._setDPadValue(value, this._dPadUp, DualShockDpad.Up);\n  }\n  /**\n   * Gets the value of D-pad down\n   */\n  get dPadDown() {\n    return this._dPadDown;\n  }\n  /**\n   * Sets the value of D-pad down\n   */\n  set dPadDown(value) {\n    this._dPadDown = this._setDPadValue(value, this._dPadDown, DualShockDpad.Down);\n  }\n  /**\n   * Gets the value of D-pad left\n   */\n  get dPadLeft() {\n    return this._dPadLeft;\n  }\n  /**\n   * Sets the value of D-pad left\n   */\n  set dPadLeft(value) {\n    this._dPadLeft = this._setDPadValue(value, this._dPadLeft, DualShockDpad.Left);\n  }\n  /**\n   * Gets the value of D-pad right\n   */\n  get dPadRight() {\n    return this._dPadRight;\n  }\n  /**\n   * Sets the value of D-pad right\n   */\n  set dPadRight(value) {\n    this._dPadRight = this._setDPadValue(value, this._dPadRight, DualShockDpad.Right);\n  }\n  /**\n   * Force the gamepad to synchronize with device values\n   */\n  update() {\n    super.update();\n    this.buttonCross = this.browserGamepad.buttons[0].value;\n    this.buttonCircle = this.browserGamepad.buttons[1].value;\n    this.buttonSquare = this.browserGamepad.buttons[2].value;\n    this.buttonTriangle = this.browserGamepad.buttons[3].value;\n    this.buttonL1 = this.browserGamepad.buttons[4].value;\n    this.buttonR1 = this.browserGamepad.buttons[5].value;\n    this.leftTrigger = this.browserGamepad.buttons[6].value;\n    this.rightTrigger = this.browserGamepad.buttons[7].value;\n    this.buttonShare = this.browserGamepad.buttons[8].value;\n    this.buttonOptions = this.browserGamepad.buttons[9].value;\n    this.buttonLeftStick = this.browserGamepad.buttons[10].value;\n    this.buttonRightStick = this.browserGamepad.buttons[11].value;\n    this.dPadUp = this.browserGamepad.buttons[12].value;\n    this.dPadDown = this.browserGamepad.buttons[13].value;\n    this.dPadLeft = this.browserGamepad.buttons[14].value;\n    this.dPadRight = this.browserGamepad.buttons[15].value;\n  }\n  /**\n   * Disposes the gamepad\n   */\n  dispose() {\n    super.dispose();\n    this.onButtonDownObservable.clear();\n    this.onButtonUpObservable.clear();\n    this.onPadDownObservable.clear();\n    this.onPadUpObservable.clear();\n  }\n}\n//# sourceMappingURL=dualShockGamepad.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}