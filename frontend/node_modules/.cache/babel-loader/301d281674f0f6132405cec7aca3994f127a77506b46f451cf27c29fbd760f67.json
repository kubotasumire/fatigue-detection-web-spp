{"ast":null,"code":"import { WebXRLayerWrapper } from \"../webXRLayerWrapper.js\";\nimport { WebXRLayerRenderTargetTextureProvider } from \"../webXRRenderTargetTextureProvider.js\";\n/**\n * Wraps XRWebGLLayer's created by Babylon Native.\n * @internal\n */\nexport class NativeXRLayerWrapper extends WebXRLayerWrapper {\n  constructor(layer) {\n    super(() => layer.framebufferWidth, () => layer.framebufferHeight, layer, \"XRWebGLLayer\", sessionManager => new NativeXRLayerRenderTargetTextureProvider(sessionManager, this));\n    this.layer = layer;\n  }\n}\n/**\n * Provides render target textures for layers created by Babylon Native.\n * @internal\n */\nexport class NativeXRLayerRenderTargetTextureProvider extends WebXRLayerRenderTargetTextureProvider {\n  constructor(sessionManager, layerWrapper) {\n    super(sessionManager.scene, layerWrapper);\n    this.layerWrapper = layerWrapper;\n    this._nativeRTTProvider = navigator.xr.getNativeRenderTargetProvider(sessionManager.session, this._createRenderTargetTexture.bind(this), this._destroyRenderTargetTexture.bind(this));\n    this._nativeLayer = layerWrapper.layer;\n  }\n  trySetViewportForView(viewport) {\n    viewport.x = 0;\n    viewport.y = 0;\n    viewport.width = 1;\n    viewport.height = 1;\n    return true;\n  }\n  getRenderTargetTextureForEye(eye) {\n    // TODO (rgerd): Update the contract on the BabylonNative side to call this \"getRenderTargetTextureForEye\"\n    return this._nativeRTTProvider.getRenderTargetForEye(eye);\n  }\n  getRenderTargetTextureForView(view) {\n    return this._nativeRTTProvider.getRenderTargetForEye(view.eye);\n  }\n  getFramebufferDimensions() {\n    return {\n      framebufferWidth: this._nativeLayer.framebufferWidth,\n      framebufferHeight: this._nativeLayer.framebufferHeight\n    };\n  }\n}\n/**\n * Creates the xr layer that will be used as the xr session's base layer.\n * @internal\n */\nexport class NativeXRRenderTarget {\n  constructor(_xrSessionManager) {\n    this._nativeRenderTarget = navigator.xr.getWebXRRenderTarget(_xrSessionManager.scene.getEngine());\n  }\n  async initializeXRLayerAsync(xrSession) {\n    await this._nativeRenderTarget.initializeXRLayerAsync(xrSession);\n    this.xrLayer = this._nativeRenderTarget.xrLayer;\n    return this.xrLayer;\n  }\n  dispose() {\n    /* empty */\n  }\n}\n//# sourceMappingURL=nativeXRRenderTarget.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}