{"ast":null,"code":"import { Vector3, Matrix } from \"../Maths/math.vector.js\";\n/**\n * Class containing a set of static utilities functions for managing Pivots\n * @internal\n */\nexport class PivotTools {\n  /**\n   * @internal\n   */\n  static _RemoveAndStorePivotPoint(mesh) {\n    if (mesh && PivotTools._PivotCached === 0) {\n      // Save old pivot and set pivot to 0,0,0\n      mesh.getPivotPointToRef(PivotTools._OldPivotPoint);\n      PivotTools._PivotPostMultiplyPivotMatrix = mesh._postMultiplyPivotMatrix;\n      if (!PivotTools._OldPivotPoint.equalsToFloats(0, 0, 0)) {\n        mesh.setPivotMatrix(Matrix.IdentityReadOnly);\n        PivotTools._OldPivotPoint.subtractToRef(mesh.getPivotPoint(), PivotTools._PivotTranslation);\n        PivotTools._PivotTmpVector.copyFromFloats(1, 1, 1);\n        PivotTools._PivotTmpVector.subtractInPlace(mesh.scaling);\n        PivotTools._PivotTmpVector.multiplyInPlace(PivotTools._PivotTranslation);\n        mesh.position.addInPlace(PivotTools._PivotTmpVector);\n      }\n    }\n    PivotTools._PivotCached++;\n  }\n  /**\n   * @internal\n   */\n  static _RestorePivotPoint(mesh) {\n    if (mesh && !PivotTools._OldPivotPoint.equalsToFloats(0, 0, 0) && PivotTools._PivotCached === 1) {\n      mesh.setPivotPoint(PivotTools._OldPivotPoint);\n      mesh._postMultiplyPivotMatrix = PivotTools._PivotPostMultiplyPivotMatrix;\n      PivotTools._PivotTmpVector.copyFromFloats(1, 1, 1);\n      PivotTools._PivotTmpVector.subtractInPlace(mesh.scaling);\n      PivotTools._PivotTmpVector.multiplyInPlace(PivotTools._PivotTranslation);\n      mesh.position.subtractInPlace(PivotTools._PivotTmpVector);\n    }\n    this._PivotCached--;\n  }\n}\n// Stores the state of the pivot cache (_oldPivotPoint, _pivotTranslation)\n// store/remove pivot point should only be applied during their outermost calls\nPivotTools._PivotCached = 0;\nPivotTools._OldPivotPoint = new Vector3();\nPivotTools._PivotTranslation = new Vector3();\nPivotTools._PivotTmpVector = new Vector3();\nPivotTools._PivotPostMultiplyPivotMatrix = false;\n//# sourceMappingURL=pivotTools.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}